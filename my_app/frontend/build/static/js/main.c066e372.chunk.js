(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n(22),r=n.n(c),s=(n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(5)),a=n(33),o=n(7),l=n(15),d=n.n(l),u=n(43),j=n(54),m=n(6),b=n(11),p=n(1),h=function(e){var t=e.items,n=e.mcTable,c=e.addMC,r=e.currentSU,a=e.currentMF,o=e.editMode,l=e.setDisplayAlert,d=e.ship,u=e.setShip,j=e.poList,h=e.totalShip,f=e.totalInspect,O=e.totalSample,_=e.reset,g=e.handleDeletePO,v=e.setPOList,x=e.aqlTable,y=e.handleHighlight,S=e.checkedState,N=e.setCheckedState,M=e.deleteShipMulti,C=Object(i.useState)(""),k=Object(s.a)(C,2),w=k[0],T=k[1],I=Object(i.useState)(!0),q=Object(s.a)(I,2),E=q[0],D=q[1],P=Object(i.useState)([]),B=Object(s.a)(P,2),F=B[0],A=B[1];Object(i.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("itemTable_MCBtn").click())};return document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").addEventListener("keydown",e),function(){document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").removeEventListener("keydown",e)}}),[]),Object(i.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("highLightItemBtn").click())},t=document.getElementById("itemTotal_searchString");if(t)return t.addEventListener("keydown",e),function(){t.removeEventListener("keydown",e)}}),[]);var U=function(e,t){y("");var n=Object(b.a)(d);0===e&&"asc"===t?n.sort((function(e,t){return e.po_no>t.po_no?1:-1})):0===e&&"desc"===t?n.sort((function(e,t){return e.po_no<t.po_no?1:-1})):1===e&&"asc"===t?n.sort((function(e,t){return e.item_no>t.item_no?1:-1})):1===e&&"desc"===t&&n.sort((function(e,t){return e.item_no<t.item_no?1:-1})),u(n)},L=function(e,t){y("");var n=Object(b.a)(F);0===e&&"asc"===t?n.sort((function(e,t){return e.item_no>t.item_no?1:-1})):0===e&&"desc"===t&&n.sort((function(e,t){return e.item_no<t.item_no?1:-1})),A(n)},R=function(e){var t=e.target.value;T(t)},K=function(e){l({message:e,position:1,timeout:1500,color:"alert__red"})},Q=function(e,t){return function(n){var i=n.target.value,c=Object(b.a)(d),r=c.findIndex((function(n){return n.po_no===e&&n.item_no===t})),s=c.find((function(n){return n.po_no===e&&n.item_no===t}));c[r]=Object(m.a)(Object(m.a)({},s),{},{inspect_qty:parseInt(i)}),u(c)}},z=function(){for(var e=document.getElementsByName("selectRow"),t=0;t<e.length;t++)e[t].checked=!0,S[t]=!0;N(S)},H=function(){for(var e=document.getElementsByName("selectRow"),t=0;t<e.length;t++)e[t].checked=!1,S[t]=!1;N(S)};return Object(p.jsxs)("div",{className:"itemTable_2col",children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"itemTable_Section",children:[Object(p.jsx)("div",{children:"Add MC:"}),"\xa0",Object(p.jsx)("div",{children:o?Object(p.jsx)("input",{type:"text",id:"itemTable_MC",name:"itemTable_MC",justify:"left",placeholder:"Additional MC here",onChange:R}):Object(p.jsx)("input",{type:"text",id:"itemTable_MC",name:"itemTable_MC",justify:"left",placeholder:"Include additional MC here",readOnly:!0,onChange:R})}),"\xa0\xa0",Object(p.jsx)("div",{children:o?Object(p.jsx)("i",{id:"itemTable_MCBtn",className:"fa fa-plus clickable",onClick:function(){!function(){var e=n.find((function(e){return e.mc_no===w})),i=t.find((function(e){return e.mc_no===w})),s=d.find((function(e){return e.mc_no===w})),o=n.find((function(e){return e.mc_no===w&&e.su_no===r&&e.mf_no===a}));e?o?s?K("MC was already entered in the ship item list, please check ! "):!e&&i||c(w):K("This MC seems not for this manufacturer!"):l({message:"This MC is not found in forthcoming or may not belong to this manufacturer!",position:1,timeout:4e3,color:"alert__red"})}()}}):null})]}),Object(p.jsxs)("div",{className:"itemTable_Header",children:[Object(p.jsx)("div",{children:"PO"}),Object(p.jsx)("div",{children:"DIV"}),Object(p.jsx)("div",{children:"Order Qty"}),Object(p.jsx)("div",{children:"Ship Qty"}),Object(p.jsx)("div",{children:"%Ship"}),Object(p.jsx)("div",{children:"Delete"}),Object(p.jsx)("div",{})]}),Object(p.jsx)("div",{id:"itemTableScroller",className:"itemTable_GridContainer",children:j?j.map((function(e,t){return Object(p.jsxs)("div",{className:"itemTable_Detail",children:[Object(p.jsx)("div",{children:e.po_no}),Object(p.jsx)("div",{children:e.customer}),Object(p.jsx)("div",{children:e.order_qty}),Object(p.jsx)("div",{children:e.ship_qty}),Object(p.jsxs)("div",{children:[Math.round(e.ship_qty/e.order_qty*100),"%"]}),Object(p.jsx)("div",{children:o?Object(p.jsx)("i",{className:"fa fa-times clickable",onClick:function(){g(e.mc_no,e.po_no)}}):null})]},t)})):null})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"itemTotal_Section",children:[o?Object(p.jsxs)("div",{children:[E?"Summary":"Edit",o?Object(p.jsx)("i",{className:"fa fa-refresh itemTotal_undo_color clickable ",onClick:function(){!function(){var e=[],t=Object(b.a)(d);t.map((function(e){return e.item_no})).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(n){var i=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),c=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),r=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.sample_qty)}),0),s=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.inspect_qty)}),0);e.push({item_no:n,order_qty:i,ship_qty:c,sample_qty:r,inspect_qty:s})})),A(e),D((function(e){return!e}))}(),y("")}}):null]}):Object(p.jsx)("div",{}),o?Object(p.jsxs)("div",{children:["Multi Del\xa0",Object(p.jsx)("i",{className:"fa fa-times itemTotal_refresh_color clickable",onClick:function(){!function(){for(var e=Object(b.a)(d),t=document.getElementsByClassName("clickrow"),n=0;n<t.length;n++)if(S[n]){var i=e[n];i=Object(m.a)(Object(m.a)({},i),{},{del:!0}),e[n]=i}e=e.filter((function(e){return!e.del})),M(e),H()}()}})]}):Object(p.jsx)("div",{}),o?Object(p.jsxs)("div",{children:["Reset Inspect \xa0",Object(p.jsx)("i",{className:"fa fa-refresh itemTotal_refresh_color clickable",onClick:function(){_()}})]}):Object(p.jsx)("div",{}),Object(p.jsxs)("div",{children:["Highlight \xa0",Object(p.jsx)("input",{type:"text",name:"itemTotal_searchString",id:"itemTotal_searchString",justify:"left",onInput:function(e){return e.target.value=(""+e.target.value).toUpperCase()},placeholder:"Enter item#"}),"\xa0",Object(p.jsx)("i",{className:"fa fa-search clickable",id:"highLightItemBtn",onClick:function(){y(document.getElementById("itemTotal_searchString").value)}})]})]}),E?Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"itemTotal_Header",children:[Object(p.jsx)("div",{children:o?Object(p.jsx)("input",{type:"checkbox",name:"selectToggle",onChange:function(){document.getElementsByName("selectToggle")[0].checked?z():H()}}):null}),Object(p.jsxs)("div",{children:["PO",Object(p.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){U(0,"asc")}}),"\xa0",Object(p.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){U(0,"desc")}})]}),Object(p.jsxs)("div",{children:["By Item",Object(p.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){U(1,"asc")}}),"\xa0",Object(p.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){U(1,"desc")}})]}),Object(p.jsx)("div",{children:"Ship"}),Object(p.jsx)("div",{children:"Sample"}),Object(p.jsx)("div",{children:"Inspect"}),Object(p.jsx)("div",{children:"Delete"})]}),Object(p.jsx)("div",{id:"scroller",className:"itemTotal_GridContainer",children:d?d.map((function(e,t){return Object(p.jsxs)("div",{className:"itemTotal_Detail",children:[Object(p.jsx)("div",{children:o?Object(p.jsx)("input",{type:"checkbox",name:"selectRow",onChange:function(){return function(e){var t=S.map((function(t,n){return n===e?!t:t}));N(t)}(t)}}):null}),Object(p.jsx)("div",{children:e.po_no}),Object(p.jsx)("div",{children:e.item_no}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"number",id:"itemTotal_shipQty",name:"itemTotal_shipQty",value:e.ship_qty||1,min:"1",max:"30000",onChange:(n=e.po_no,i=e.item_no,function(e){var t=e.target.value;if(""!==t){parseInt(t)>3e4&&(t=3e4,l({message:"Number of ship units is too large!",position:1,timeout:3e3,color:"alert__red"}));var c=Object(b.a)(d),r=c.findIndex((function(e){return e.po_no===n&&e.item_no===i})),s=c.find((function(e){return e.po_no===n&&e.item_no===i}));c[r]=Object(m.a)(Object(m.a)({},s),{},{ship_qty:parseInt(t)});var a=c.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),o=x.filter((function(e){return e.size_start<=a&&e.size_end>=a}));c=c.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/a*o[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/a*o[0]["25sample"])})})),u(c);var p=c.filter((function(e){return e.po_no===n})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),h=Object(b.a)(j),f=h.findIndex((function(e){return e.po_no===n})),O=h.find((function(e){return e.po_no===n}));h[f]=Object(m.a)(Object(m.a)({},O),{},{ship_qty:p}),v(h)}}),readOnly:o?"":"readOnly"})}),Object(p.jsx)("div",{children:e.sample_qty}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"number",id:"itemTotal_InspectQty",name:"itemTotal_InspectQty",value:e.inspect_qty||1,min:"1",max:"30000",onChange:Q(e.po_no,e.item_no),readOnly:o?"":"readOnly"})}),Object(p.jsx)("div",{children:o?Object(p.jsx)("i",{className:"fa fa-times clickable clickrow",onClick:function(){!function(e,t){var n=d.filter((function(n){return!(n.item_no===e&&n.po_no===t)}));M(n)}(e.item_no,e.po_no)}}):null})]},t);var n,i})):null})]}):Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"itemTotal_Header2",children:[Object(p.jsx)("div",{}),Object(p.jsxs)("div",{children:["By Item",Object(p.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){L(0,"asc")}}),"\xa0",Object(p.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){L(0,"desc")}})]}),Object(p.jsx)("div",{children:"Ship"}),Object(p.jsx)("div",{children:"Sample"}),Object(p.jsx)("div",{children:"Inspect"}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{})]}),Object(p.jsx)("div",{id:"scroller",className:"itemTotal_GridContainer",children:F?F.map((function(e,t){return Object(p.jsxs)("div",{className:"itemTotal_Detail",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:e.item_no}),Object(p.jsx)("div",{children:e.ship_qty}),Object(p.jsx)("div",{children:e.sample_qty}),Object(p.jsx)("div",{children:e.inspect_qty}),Object(p.jsx)("div",{})]},t)})):null})]}),E?Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"itemTotal_Header",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:" Total :"}),Object(p.jsx)("div",{children:h}),Object(p.jsx)("div",{children:O}),Object(p.jsx)("div",{className:O!==f?"highlightSection":null,children:f}),Object(p.jsx)("div",{})]})}):Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"itemTotal_Header2",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:" Total :"}),Object(p.jsx)("div",{children:h}),Object(p.jsx)("div",{children:O}),Object(p.jsx)("div",{className:O!==f?"highlightSection":null,children:f}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{})]})})]})]})},f=function(e){var t=e.alert,n="alert ".concat(t.color);return Object(p.jsx)("h5",{className:n,children:t.message})},O=n(8),_=n(58),g=function(e){var t=Object(O.usePromiseTracker)({area:e.area}).promiseInProgress,n=e.spinnerMessage;return t&&Object(p.jsxs)("div",{style:{marginTop:"0.5rem",width:"100%",height:"30",display:"flex",justifyContent:"center",alignItems:"center",color:"green",fontWeight:"bold"},children:[n,Object(p.jsx)(_.a,{color:"green",height:30,width:100})]})},v=function(e){var t=e.checkDuplicateID,n=e.mcTable,c=e.setDisplayAlert,r=e.inspectionID,s=e.setInspectionID,a=e.clearScreen,o=e.searchInspByMC,l=e.editMode,d=e.inspType,u=e.showFull,j=function(e){var t=e.target.id,n=e.target.value;switch(t){case"searchKey_mc":s(Object(m.a)(Object(m.a)({},r),{},{mc:n})),n.length>=3?o(n):a();break;case"searchKey_bookingNo":s(Object(m.a)(Object(m.a)({},r),{},{booking_no:n}));break;case"searchKey_type":s(Object(m.a)(Object(m.a)({},r),{},{type:n}))}};var b=function(e){c({message:e,position:0,timeout:3e3,color:"alert__red"})};return Object(p.jsxs)(i.Fragment,{children:[Object(p.jsxs)("div",{className:"searchKey",children:[Object(p.jsxs)("div",{className:"searchKey_pair",children:[Object(p.jsx)("label",{children:"MC# : "}),Object(p.jsx)("input",{autoFocus:!0,type:"text",name:"searchKey_mc",id:"searchKey_mc",onChange:j,readOnly:u?"readOnly":""})]}),Object(p.jsxs)("div",{className:"searchKey_pair",children:[Object(p.jsx)("label",{children:"Booking # : "}),Object(p.jsx)("input",{type:"number",name:"searchKey_bookingNo",id:"searchKey_bookingNo",placeholder:"Number",min:"1",max:"9",onChange:j,readOnly:u?"readOnly":""})]}),Object(p.jsxs)("div",{className:"searchKey_pair",children:[Object(p.jsx)("label",{children:"Type : "}),Object(p.jsxs)("select",{name:"searchKey_type",id:"searchKey_type",onChange:j,children:[Object(p.jsx)("option",{value:"Select",disabled:u?"disabled":"",children:"Select"}),d&&d.map((function(e){return Object(p.jsx)("option",{value:e.insp_type,disabled:u?"disabled":"",children:e.insp_type_long},e.insp_type)}))]})]}),Object(p.jsx)("div",{}),l?null:Object(p.jsx)("div",{children:""!==r.mc&&"Select"!==r.booking_no&&""!==r.booking_no&&"Select"!==r.type?Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:function(){!function(e){var i=n.find((function(t){return t.mc_no===e.mc}));a(),i?t(e):b("This MC doesn't exists or it doesn't belong to this manufacturer!")}(r)},children:"Create Booking"})}):null})]}),Object(p.jsx)(g,{area:"searchKey"})]})},x=function(e){var t=e.handleSave,n=e.handleDelete,c=e.handleSearch,r=e.inspectionID,s=e.printReport,a=e.editMode,o=e.setEditMode,l=e.userProfile,d=e.misc,u=e.showFull,j=e.clearScreen,m=e.setDisplayAlert,b=e.oldMC,h=d.submitted,f=void 0!==l.ignore_submit&&l.ignore_submit,O=function(e){var i=e.target.id;if(o(!1),"save"===i&&t(!!h,!1),"saveAndEdit"===i&&t(!!h,!0),"edit"===i){if(b.current)return void m({message:"You can NOT edit inspecton with obsolete MC.  This is for view only !",position:0,timeout:2500,color:"alert__red"});o(!0)}"delete"===i&&n(r),"search"===i&&(o(!1),c(r)),"print"===i&&s("Inspection_Report.xlsx",!1),"print_draft"===i&&s("Inspection_Report.xlsx",!0),"cancel"===i&&(o(!1),j())};return Object(p.jsx)(i.Fragment,{children:Object(p.jsxs)("div",{className:"mainMenu",children:[Object(p.jsxs)("div",{className:"mainMenu_inspectionKey",children:["Booking Key : \xa0\xa0",null,null]}),a?Object(p.jsx)("button",{id:"saveAndEdit",onClick:O,children:"Save & Edit"}):null,a?Object(p.jsx)("button",{id:"save",onClick:O,children:"Save"}):null,a?null:Object(p.jsx)("button",{id:"search",onClick:O,children:"Search"}),a||!u||h&&!f?null:Object(p.jsxs)("button",{id:"edit",onClick:O,children:["Edit\xa0",h&&u?Object(p.jsx)("i",{className:"fa fa-lock"}):null]}),!u||h&&!f?null:Object(p.jsx)("button",{id:"cancel",onClick:O,children:"Cancel"}),!a&&h?Object(p.jsx)("button",{id:"print",onClick:O,children:"Print IC"}):null,a||h||!u?null:Object(p.jsx)("button",{id:"print_draft",onClick:O,children:"Print"}),u&&f&&u?Object(p.jsx)("button",{id:"delete",onClick:O,className:"deleteButton",children:"Delete"}):null]})})},y=function(e){for(var t=e.setInspectionID,n=e.handleSearch,c=e.searchedMC,r=e.setShowSearchedMC,s=e.currentMF,a=[],o=0;o<c.length;o++)c[o].main.mf_no===s&&a.push(c[o]._id);return Object(p.jsxs)(i.Fragment,{children:[Object(p.jsxs)("div",{className:"searchedMC",children:[Object(p.jsxs)("div",{className:"searchedMC_header1 searchedMC_header",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:"MC"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Booking #"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),Object(p.jsxs)("div",{className:"searchedMC_header2 searchedMC_header",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:"MC"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Booking #"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),Object(p.jsxs)("div",{className:"searchedMC_header3 searchedMC_header",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:"MC"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Booking #"}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),a.length>0?a.map((function(e,i){return Object(p.jsxs)("div",{className:"searchedMC_detail",onClick:function(){var i;i={mc:e.mc,booking_no:e.booking_no,type:e.type},t(i),n(i),document.getElementById("searchKey_mc").value=i.mc,document.getElementById("searchKey_bookingNo").value=i.booking_no,document.getElementById("searchKey_type").value=i.type,r(!1)},children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:e.mc}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:e.booking_no}),Object(p.jsx)("div",{className:"searchedMC_detail_center",children:e.type})]},i)})):null]}),Object(p.jsx)(g,{area:"mfrSelection"})]})},S=function(e){var t=e.currentSU,n=e.currentMF,c=e.currentSUName,r=e.currentMFName,s=e.setSelectingSupplier,a=e.setShowFull,o=e.setMFRsearch,l=e.setEntryPosition;return Object(p.jsx)(i.Fragment,{children:t?Object(p.jsxs)("div",{className:"supplierInfo",children:[Object(p.jsx)("button",{onClick:function(){a(!1),l(-1),o(""),s(!0)},children:"Select"}),Object(p.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoSU",id:"supplierInfo_bar",children:[c.toLowerCase()," (",t,")"]}),Object(p.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoMF",children:[r.toLowerCase()," (",n,")"]})]}):null})},N=function(e){var t=e.partyTable,n=e.setCurrentSU,c=e.setCurrentMF,r=e.setCurrentSUName,a=e.setCurrentMFName,o=e.selectingSupplier,l=e.setSelectingSupplier,d=e.setMFRsearch,u=e.mfrSearch,j=e.getMCtable,m=e.setEditMode,b=Object(i.useState)(-1),h=Object(s.a)(b,2),f=h[0],O=h[1],_=function(e,t,i,s){n(e),c(t),r(i),a(s),l(!1),j(e,t),m(!1)};return Object(p.jsxs)(i.Fragment,{children:[t&&o?Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"mfrSelection_header",children:" Select a manufacturer below:"}),Object(p.jsx)("div",{className:"mfrSelection_input",children:Object(p.jsx)("input",{autoFocus:!0,type:"text",id:"mfrSearch",name:"mfrSearch",value:u||"",justify:"left",onChange:function(e){var t=e.target.value;d(t.toUpperCase())},style:{textTransform:"uppercase"},onKeyDown:function(e){if("ArrowDown"===e.key){var n=t.filter((function(e){return 0===u.length||"".concat(" ",e.SU_NAME," ",e.SU," ",e.MF," ",e.MF_NAME).search(u)>0})).length;O(f<n?function(e){return e+1}:n-1)}if("ArrowUp"===e.key&&O(f>-1?function(e){return e-1}:0),"Enter"===e.key){var i=t.filter((function(e){return 0===u.length||"".concat(" ",e.SU_NAME," ",e.SU," ",e.MF," ",e.MF_NAME).search(u)>0}))[f];O(0),_(i.SU,i.MF,i.SU_NAME,i.MF_NAME)}},placeholder:"Type to search"})})]}):null,t&&o?t.filter((function(e){return 0===u.length||"".concat(" ",e.SU_NAME," ",e.SU," ",e.MF," ",e.MF_NAME).search(u)>0})).map((function(e,t){return Object(p.jsx)("div",{className:"mfrSelection",onClick:function(){_(e.SU,e.MF,e.SU_NAME,e.MF_NAME)},children:Object(p.jsxs)("div",{className:"mfrSelection_capitalize  mfrSelection_list "+(f===t?"mfrSelection_highlight":null),children:[Object(p.jsxs)("div",{children:[" \xa0 ",e.SU_NAME.toLowerCase()," (",e.SU,") "]}),Object(p.jsxs)("div",{children:[" ",e.MF_NAME?e.MF_NAME.toLowerCase():null," (",e.MF,") \xa0 "]})]})},t)})):null]})},M=n(55),C=n.n(M),k=function(e){var t=e.setInspectionDate,n=e.inspectionDate,c=e.setMisc,r=e.misc,a=e.editMode,o=e.userProfile,l=e.qaName,d=e.productCategories,u=Object(i.useState)(""),j=Object(s.a)(u,2),b=j[0],h=j[1];Object(i.useEffect)((function(){if(""===n){var e=new Date,i=6e4*e.getTimezoneOffset();e=new Date(e.getTime()-i),t(e.toISOString().substring(0,10))}}),[n,t]),Object(i.useEffect)((function(){}),[r,o,c]);var f=function(e,t){return function(n){var i=n.target.value;if(r){var s=Object(m.a)({},r);switch(e){case 2:s=Object(m.a)(Object(m.a)({},s),{},{product_type:i});break;case 7:s=Object(m.a)(Object(m.a)({},s),{},{governance_inspection:t});break;case 11:s=Object(m.a)(Object(m.a)({},s),{},{ship_window:i});break;case 15:s=Object(m.a)(Object(m.a)({},s),{},{qa_type:i}),"SQA"===i&&(s=Object(m.a)(Object(m.a)({},s),{},{qa_name:"SQA",governance_inspection:void 0,sqa_iteration:void 0,cap:void 0}),h(!0)),"MQA"===i&&void 0===s.mqa&&(s=Object(m.a)(Object(m.a)({},s),{},{qa_name:l})),"MQA"===i&&h(!1);break;case 16:s=Object(m.a)(Object(m.a)({},s),{},{mqa:i});break;case 17:s=Object(m.a)(Object(m.a)({},s),{},{sqa:i});break;case 19:s=Object(m.a)(Object(m.a)({},s),{},{product_category:i});break;case 20:s=Object(m.a)(Object(m.a)({},s),{},{label:i});break;default:console.log("No element")}c(s)}}};return Object(p.jsxs)("div",{className:"misc",children:[Object(p.jsxs)("div",{className:"misc_a misc_grid_a ",children:[Object(p.jsx)("div",{className:"misc_title",children:"Governance Inspection (A)"}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"radio",id:"misc_governance_inspection_yes",name:"misc_governance_inspection",value:r.governance_inspection||"",checked:"Yes"===r.governance_inspection,onChange:f(7,"Yes"),disabled:a&&!b?"":"disabled"})}),Object(p.jsx)("div",{children:"Yes"}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"radio",id:"misc_governance_inspection_no",name:"misc_governance_inspection",value:r.governance_inspection||"",checked:"No"===r.governance_inspection,onChange:f(7,"No"),disabled:a&&!b?"":"disabled"})}),Object(p.jsx)("div",{children:"No"})]}),Object(p.jsx)("div",{className:"misc_b",children:Object(p.jsxs)("div",{className:"misc_title misc_grid_b",children:[Object(p.jsx)("div",{children:"Inspection Date (B)"}),Object(p.jsx)(C.a,{className:"datePicker",dateFormat:"MM/dd/yy",selected:function(e){var t=e;if(""===t){var n=6e4*(t=new Date).getTimezoneOffset();t=new Date(t.getTime()-n)}else{var i=6e4*(t=new Date(e)).getTimezoneOffset();t=new Date(t.getTime()+i)}return t}(n),onChange:function(e){return function(e){var n=6e4*e.getTimezoneOffset(),i=new Date(e.getTime()-n);t(i.toISOString().substring(0,10))}(e)},readOnly:a?"":"readOnly"})]})}),Object(p.jsxs)("div",{className:"misc_c misc_grid_c",children:[Object(p.jsx)("div",{className:"misc_title",children:"Ship Window (C)"}),Object(p.jsx)("input",{type:"text",id:"misc_shipWindow",name:"misc_shipWindow",value:r.ship_window||"",justify:"left",placeholder:"Ship Window",onChange:f(11),readOnly:a?"":"readOnly"})]}),Object(p.jsx)("div",{className:"misc_d",children:Object(p.jsxs)("div",{className:"misc_title misc_grid_d",children:[Object(p.jsx)("div",{className:"misc_title",children:"Inspection By (D)"}),Object(p.jsxs)("select",{id:"misc_qaType",name:"misc_qaType",value:r.qa_type||"Select",justify:"left",placeholder:" ",onChange:f(15),children:[Object(p.jsx)("option",{value:"Select",children:"Select"}),Object(p.jsx)("option",{value:"MQA",children:"MQA"}),Object(p.jsx)("option",{value:"SQA",children:"SQA"})]})]})}),Object(p.jsxs)("div",{className:"misc_e misc_grid_e",children:[Object(p.jsx)("div",{className:"misc_title",children:"Product Type (E)"}),Object(p.jsx)("input",{type:"text",id:"misc_productType",name:"misc_productType",value:r.product_type||"",justify:"left",placeholder:"Product Type",onChange:f(2),readOnly:a?"":"readOnly",style:{textTransform:"uppercase"}})]}),Object(p.jsxs)("div",{className:"misc_f misc_grid_f",children:[Object(p.jsx)("div",{className:"misc_title",children:("MQA"===r.qa_type||r.qa_type,Object(p.jsx)("span",{children:"QA Name (F)"}))}),"MQA"===r.qa_type?Object(p.jsx)("input",{type:"text",id:"misc_mqa",name:"misc_mqa",value:l||"",justify:"left",placeholder:"Inspector",onChange:f(17),readOnly:"readOnly"}):void 0===r.qa_type||"Select"===r.qa_type?Object(p.jsx)("input",{type:"text",id:"misc_mqa",name:"misc_mqa",value:"",justify:"left",placeholder:"Inspector",onChange:f(17),readOnly:"readOnly"}):Object(p.jsx)("input",{type:"text",id:"misc_sqa",name:"misc_sqa",value:"SQA",justify:"left",placeholder:"Inspector",onChange:f(17),readOnly:"readOnly"})]}),Object(p.jsxs)("div",{className:"misc_g misc_grid_g",children:[Object(p.jsx)("div",{className:"misc_title",children:"Brand (G)"}),Object(p.jsx)("input",{type:"text",id:"misc_label",name:"misc_label",value:r.label||"",justify:"left",onChange:f(20),readOnly:a?"":"readOnly",style:{textTransform:"uppercase"}})]}),Object(p.jsxs)("div",{className:"misc_h misc_grid_h",children:[Object(p.jsx)("div",{className:"misc_title",children:"Product Category (H)"}),Object(p.jsxs)("select",{id:"misc_product_category",name:"misc_product_category",value:r.product_category||"Select",justify:"left",placeholder:" ",onChange:f(19),children:[Object(p.jsx)("option",{value:"Select",children:"Select"}),d&&d.map((function(e){return Object(p.jsx)("option",{value:e.category,disabled:a?"":"disabled",children:e.category},e.category)}))]})]})]})},w=function(e){var t=e.position;return Object(p.jsxs)(i.Fragment,{children:[1===t?Object(p.jsx)(g,{area:"getUserProfile",spinnerMessage:"Loading your profile, please wait... "}):null,2===t?Object(p.jsxs)("div",{children:[Object(p.jsx)(g,{area:"printReport",spinnerMessage:"Preparing the report, please wait... "}),Object(p.jsx)(g,{area:"saveInspection",spinnerMessage:"Saving the changes, please wait... "}),Object(p.jsx)(g,{area:"deleteInspection",spinnerMessage:"Deleting, please wait... "}),Object(p.jsx)(g,{area:"createInspection",spinnerMessage:"Loading, please wait... "}),Object(p.jsx)(g,{area:"getMCtable",spinnerMessage:"Getting MC data, please wait... "})]}):null,3===t?Object(p.jsxs)("div",{children:[Object(p.jsx)(g,{area:"sharePointFiles",spinnerMessage:"Refreshing SharePoint info, please wait... "}),Object(p.jsx)(g,{area:"downloadSharePointfiles",spinnerMessage:"Downloading SharePoint info, please wait... "}),Object(p.jsx)(g,{area:"sharePointUpload",spinnerMessage:"Uploading file(s) to SharePoint, please wait... "})]}):null,4===t?Object(p.jsx)(g,{area:"printReport",spinnerMessage:"Preparing the report, please wait... "}):null,10===t?Object(p.jsx)(g,{area:"pastInspection",spinnerMessage:"Loading past inspections, please wait... "}):null]})},T=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)(!1),a=Object(s.a)(r,2),o=a[0],l=a[1],_=Object(i.useState)({position:100}),g=Object(s.a)(_,2),M=g[0],C=g[1],T=Object(i.useState)([]),I=Object(s.a)(T,2),q=I[0],E=I[1],D=Object(i.useState)(""),P=Object(s.a)(D,2),B=P[0],F=P[1],A=Object(i.useState)({mc:"",booking_no:"Select",type:"Select"}),U=Object(s.a)(A,2),L=U[0],R=U[1],K=Object(i.useState)([]),Q=Object(s.a)(K,2),z=Q[0],H=Q[1],J=Object(i.useState)(""),G=Object(s.a)(J,2),W=G[0],Y=G[1],V=Object(i.useState)(""),X=Object(s.a)(V,2),Z=X[0],$=X[1],ee=Object(i.useState)([]),te=Object(s.a)(ee,2),ne=te[0],ie=te[1],ce=Object(i.useState)([]),re=Object(s.a)(ce,2),se=re[0],ae=re[1],oe=Object(i.useState)(""),le=Object(s.a)(oe,2),de=le[0],ue=le[1],je=Object(i.useState)(""),me=Object(s.a)(je,2),be=me[0],pe=me[1],he=Object(i.useState)(!0),fe=Object(s.a)(he,2),Oe=fe[0],_e=fe[1],ge=Object(i.useState)([]),ve=Object(s.a)(ge,2),xe=ve[0],ye=ve[1],Se=Object(i.useState)([]),Ne=Object(s.a)(Se,2),Me=Ne[0],Ce=Ne[1],ke=Object(i.useState)(!1),we=Object(s.a)(ke,2),Te=we[0],Ie=we[1],qe=Object(i.useState)({}),Ee=Object(s.a)(qe,2),De=Ee[0],Pe=Ee[1],Be=Object(i.useState)({}),Fe=Object(s.a)(Be,2),Ae=Fe[0],Ue=Fe[1],Le=Object(i.useState)(!1),Re=Object(s.a)(Le,2),Ke=Re[0],Qe=Re[1],ze=Object(i.useState)([]),He=Object(s.a)(ze,2),Je=He[0],Ge=He[1],We=Object(i.useState)(""),Ye=Object(s.a)(We,2),Ve=Ye[0],Xe=Ye[1],Ze=Object(i.useState)([]),$e=Object(s.a)(Ze,2),et=$e[0],tt=$e[1],nt=Object(i.useState)(""),it=Object(s.a)(nt,2),ct=it[0],rt=it[1],st=Object(i.useState)(""),at=Object(s.a)(st,2),ot=at[0],lt=at[1],dt=Object(i.useState)([]),ut=Object(s.a)(dt,2),jt=ut[0],mt=ut[1],bt=Object(i.useState)([]),pt=Object(s.a)(bt,2),ht=pt[0],ft=pt[1],Ot=Object(i.useState)(0),_t=Object(s.a)(Ot,2),gt=_t[0],vt=_t[1],xt=Object(i.useState)(0),yt=Object(s.a)(xt,2),St=yt[0],Nt=yt[1],Mt=Object(i.useState)(0),Ct=Object(s.a)(Mt,2),kt=Ct[0],wt=Ct[1],Tt=Object(i.useState)([]),It=Object(s.a)(Tt,2),qt=It[0],Et=It[1],Dt=Object(i.useRef)(!1),Pt=Object(i.useRef)(""),Bt=Object(i.useRef)(!1),Ft=Object(i.useState)([]),At=Object(s.a)(Ft,2),Ut=At[0],Lt=At[1],Rt=Object(i.useState)(-1),Kt=Object(s.a)(Rt,2),Qt=Kt[0],zt=Kt[1];Object(i.useEffect)((function(){var e=document.querySelector(":root"),t=navigator.userAgent.toLowerCase();/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(t)?e.style.setProperty("--changeTrack_scroll_width","7fr"):e.style.setProperty("--changeTrack_scroll_width","6.7fr"),t.includes("safari")&&t.includes("macintosh")&&e.style.setProperty("--changeTrack_scroll_width","7fr"),Object(O.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){H(e.userProfile),E(e.mcTable),ae(e.partyTable),ye(e.mfList),Ce(e.aqlTable),lt(e.productCategories),mt(e.inspType),tt(e.factoryMaster)})).catch((function(e){console.log(e),Wt({message:"Error getting user's profile at this moment, please try again !",position:0,timeout:3e3,color:"alert__red"})})),"getUserProfile")}),[]);var Ht=function(e){e=e.trim();var t,n,i,c=document.getElementsByClassName("itemTotal_Detail"),r=c.length,s=-1;for(n=0;n<r;n++)c[n].style.backgroundColor="#0746f54d";for(t=0;t<r;t++){c[t].getElementsByTagName("div")[2].innerHTML.includes(e)&&""!==e&&(c[t].style.backgroundColor="yellow",-1===s&&(s=t))}for(s>0&&(document.getElementById("scroller").scrollTo(0,0),i=document.getElementById("scroller").scrollHeight/r*s,document.getElementById("scroller").scrollBy(0,i)),r=(c=document.getElementsByClassName("itemTable_Detail")).length,s=-1,n=0;n<r;n++)c[n].style.backgroundColor="#0746f54d";for(t=0;t<r;t++){c[t].children[2].innerHTML.includes(e)&&""!==e&&(c[t].style.backgroundColor="yellow",-1===s&&(s=t))}s>0&&(document.getElementById("itemTableScroller").scrollTo(0,0),i=document.getElementById("itemTableScroller").scrollHeight/r*s,document.getElementById("itemTableScroller").scrollBy(0,i))};Object(i.useEffect)((function(){var e=Object(b.a)(ht),t=e.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),n=e.reduce((function(e,t){return e+parseInt(t.inspect_qty)}),0);if(vt(t),Nt(n),t>0){var i=Me.filter((function(e){return e.size_start<=t&&e.size_end>=t}))[0]["25sample"];wt(i)}else wt(0)}),[ht,Me]);var Jt=function(e,t){se.map((function(t){return t.SU===e?ue(t.SU_NAME):null})),se.map((function(e){return e.MF===t?pe(e.MF_NAME):null})),et.map((function(n){return n.mf_no===t&&n.su_no===e?rt(n.mqa):null}))},Gt=function(e){var t,i=q.filter((function(t){return t.mc_no===e}));!function(e){Bt.current=!1;var t=Object(b.a)(n).concat(e);c(t);var i=ht.concat(e.map((function(e){return{mc_no:e.mc_no,po_no:e.po_no,order_qty:e.order_qty,item_no:e.item_no,ship_qty:e.ship_qty}}))),r=i.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),s=Me.filter((function(e){return e.size_start<=r&&e.size_end>=r})),a=i.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/r*s[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/r*s[0]["25sample"])})}));ft(a);var o=[];a.map((function(e){return e.po_no})).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(e){var n=t.filter((function(t){return t.po_no===e}))[0].mc_no,i=t.filter((function(t){return t.po_no===e})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),c=a.filter((function(t){return t.po_no===e})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),r=t.filter((function(t){return t.po_no===e}))[0].customer;o.push({mc_no:n,po_no:e,order_qty:i,ship_qty:c,customer:r})})),Et(o)}(i),t=void 0===De.ship_window||0===De.ship_window.length?i[0].ship_window:De.ship_window.concat(", ").concat(i[0].ship_window);var r=i[0].item_desc,s=i[0].label;Pe(Object(m.a)(Object(m.a)({},De),{},{ship_window:t,product_type:r,label:s})),Jt(W,Z),Qe(!0),Ie(!0),F("")},Wt=function(e){C(e),setTimeout((function(){C({position:100})}),e.timeout)},Yt=function(e){Object(O.trackPromise)(d()({url:"/booking/api/search",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({_id:e})}).then((function(e){return e.data})).then((function(t){Bt.current=!1;var n=t.main.mf_no;if(0===t.items.length&&n===Z)console.log("Empty inspection record with mf# :",n);else{if(n!==Z)return void Wt({message:"This MC does not belong to this manufacturer!",position:0,timeout:1500,color:"alert__red"});0===q.filter((function(t){return t.mc_no===e.mc})).length&&(Bt.current=!0)}Qe(!0),Dt.current=!0,c(t.items),ft(t.itemsTotal),Et(t.poList),F(t.main.inspection_date),Ue(t.main),Pe(t.misc?t.misc:{}),Jt(t.main.su_no,t.main.mf_no),void 0===t.update_history?Ge([]):Ge(t.update_history);var i=new Array(t.itemsTotal.length).fill(!1);Lt(i)})).catch((function(e){406===e.response.status?Wt({message:"Not a valid MC for this manufacturer !",position:0,timeout:2e3,color:"alert__red"}):501===e.response.status?window.location="/login/timeout":Wt({message:"No such Inspection ID, please try again !",position:0,timeout:2e3,color:"alert__red"})})),"searchKey")},Vt=function(){c([]),ft([]),Et([]),ie([]),l(!1),Pe([]),Ue([]),Qe(!1),Ie(!1),Pt.current="",document.getElementById("itemTable_MC").value="",document.getElementById("itemTotal_searchString")&&(document.getElementById("itemTotal_searchString").value=""),Lt([])},Xt=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Zt=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wt({message:"Session timeout, please login again !",position:0,timeout:3e3,color:"alert__red"}),e.next=3,Xt(3e3);case 3:window.location="/login/timeout";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$t=function(e){l(!0),Object(O.trackPromise)(d()({url:"/booking/api/searchInspByMC",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({mc:e,mfList:xe})}).then((function(e){return e.data})).then((function(e){ie(e)})).catch((function(e){501===e.response.status?Zt():Wt({message:"Something went wrong !",position:0,timeout:2e3,color:"alert__red"})})),"mfrSelection")};function en(e){var t=new Date(e).toTimeString(),n=new Date(e).toDateString()+" "+t,i=n.search("GMT+")-1;return n=n.substring(0,i)}return Object(p.jsxs)(i.Fragment,{children:[Object(p.jsx)(S,{currentSU:W,currentMF:Z,currentSUName:de,currentMFName:be,setSelectingSupplier:_e,setShowFull:Qe,setMFRsearch:Xe,setEntryPosition:zt}),Object(p.jsx)(N,{partyTable:se,setCurrentSU:Y,setCurrentMF:$,setCurrentSUName:ue,setCurrentMFName:pe,selectingSupplier:Oe,setSelectingSupplier:_e,setMFRsearch:Xe,mfrSearch:Ve,getMCtable:function(e,t){Object(O.trackPromise)(d()({url:"/booking/api/getMCtable",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({su:e,mf:t})}).then((function(e){return e.data})).then((function(e){E(e)})).catch((function(e){Wt({message:"Error getting MC",position:4,timeout:1500,color:"alert__red"})})),"getMCtable")},setEditMode:Ie,entryPosition:Qt,setEntryPosition:zt}),Object(p.jsx)(w,{position:1}),Oe?null:Object(p.jsx)(x,{handleSave:function(e,t){if(void 0===De.qa_type||"Select"===De.qa_type)return Wt({message:"Inpsected By (D) must be selected !",position:0,timeout:3e3,color:"alert__red"}),void Ie(!0);var i={su_no:W,mf_no:Z,inspection_date:B,submitted:e},c={mc:L.mc,booking_no:L.booking_no,type:L.type},r=Object(m.a)({},De);r=Object(m.a)({},r),Object(O.trackPromise)(d()({url:"/booking/api/save",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:c,main:i,misc:r,mf:Z,items:n,itemsTotal:ht,poList:qt,updateHistory:Je,folder:"SU"+W+"MF"+Z,inspection_id:L.mc+"-"+L.type,email:z.email,localTime:en(Date.now())})}).then((function(e){if(200===e.status)Wt({message:"Saved Successfully !",position:0,timeout:1e3,color:"alert__green"}),t?Ie(!0):Vt();else{var n=e.data;Wt({message:n,position:0,timeout:4e3,color:"alert__red"}),Ie(!0)}})).catch((function(e){var t="There was an error saving this record, please contact the admin !!";e.message.includes("500")?t=e.response.data:Wt({message:t,position:0,timeout:4e3,color:"alert__red"}),Wt({message:t,position:0,timeout:4e3,color:"alert__red"})})),"saveInspection")},handleSearch:Yt,inspectionID:L,handleDelete:function(e){!0===window.confirm("Are you sure you want to delete this inspection ? ")&&Object(O.trackPromise)(d()({url:"/booking/api/delete",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(e){return 200===e.status?(Vt(),Wt({message:"Deleted successfully !",position:0,timeout:1500,color:"alert__green"})):null})).catch((function(e){Wt({message:"Error deleting the inspection ID !",position:0,timeout:1500,color:"alert__red"})})),"deleteInspection")},printReport:function(e,t){void 0!==De.qa_type?"MQA"!==De.qa_type||void 0!==ct&&"Select"!==ct?(e="Booking Report for - "+L.mc+"-"+L.booking_no+"-"+L.type+"-"+De.qa_type+".xlsx",Object(O.trackPromise)(fetch("/booking/api/printreport",{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",inspectionID:JSON.stringify({inspectionID:L}),reportType:JSON.stringify("Single"),localTime:JSON.stringify(en(Date.now()))}}).then((function(e){return e.blob()})).then((function(t){var n=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=n,i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)})),"printReport")):Wt({message:"Some Errors on QA Name (F) !",position:0,timeout:2e3,color:"alert__red"}):Wt({message:"QA Type must be chosen !",position:0,timeout:2e3,color:"alert__red"})},editMode:Te,setEditMode:Ie,userProfile:z,main:Ae,misc:De,showFull:Ke,clearScreen:Vt,setDisplayAlert:Wt,oldMC:Bt}),Oe?null:Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsxs)(i.Fragment,{children:[Object(p.jsx)(v,{checkDuplicateID:function(e){Object(O.trackPromise)(d()({url:"/booking/api/checkDuplicateID",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(t){return 200===t.status?void Wt({message:"This key has been used by previous inspection ! Please check and or consider a new booking number!",position:0,timeout:3e3,color:"alert__red"}):Gt(e.mc)})),"createInspection")},mcTable:q,setDisplayAlert:Wt,inspectionID:L,setInspectionID:R,clearScreen:Vt,searchInspByMC:$t,currentSU:W,currentMF:Z,editMode:Te,inspType:jt,showFull:Ke}),o?Object(p.jsx)(y,{inspectionID:L,setInspectionID:R,handleSearch:Yt,searchInspByMC:$t,searchedMC:ne,setShowSearchedMC:l,currentMF:Z}):null]})})}),0===M.position?Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(f,{alert:M})})}):null,Object(p.jsx)(w,{position:2}),Object(p.jsx)("div",{className:"flex-row "+(Ke?null:"hideSection"),children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(i.Fragment,{children:Object(p.jsx)(k,{setInspectionDate:F,inspectionDate:B,setMisc:Pe,misc:De,editMode:Te,qaName:ct,productCategories:ot,userProfile:z,items:n})})})}),1===M.position?Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(f,{alert:M})})}):null,Object(p.jsx)("div",{className:"flex-row "+(Ke?null:"hideSection"),children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(h,{setItems:c,items:n,mcTable:q,addMC:Gt,currentSU:W,currentMF:Z,editMode:Te,aqlTable:Me,setDisplayAlert:Wt,ship:ht,setShip:ft,poList:qt,setPOList:Et,totalShip:gt,setTotalShip:vt,totalInspect:St,setTotalInspect:Nt,totalSample:kt,setTotalSample:wt,reset:function(){ft((function(e){return e.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{inspect_qty:e.sample_qty})}))}))},handleDeletePO:function(e,t){Ht("");var i=Object(b.a)(ht);i=i.filter((function(e){return e.po_no!==t}));var r=(i=ht.filter((function(e){return!(e.po_no===t)}))).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),s=Me.filter((function(e){return e.size_start<=r&&e.size_end>=r}));i=i.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/r*s[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/r*s[0]["25sample"])})})),ft(i),Et((function(e){return e.filter((function(e){return e.po_no!==t}))}));var a=n.map((function(e){return e.mc_no})).filter((function(e,t,n){return n.indexOf(e)===t})),o=i.map((function(e){return e.mc_no})).filter((function(e,t,n){return n.indexOf(e)===t}));a.length>o.length&&c((function(t){return t.filter((function(t){return t.mc_no!==e}))}))},handleHighlight:Ht,checkedState:Ut,setCheckedState:Lt,deleteShipMulti:function(e){Ht("");var t=e.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),i=Me.filter((function(e){return e.size_start<=t&&e.size_end>=t}));e=e.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/t*i[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/t*i[0]["25sample"])})})),ft(e);var r=Object(b.a)(n),s=[];e.map((function(e){return e.po_no})).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(t){var n=r.filter((function(e){return e.po_no===t}))[0].mc_no,i=r.filter((function(e){return e.po_no===t})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),c=e.filter((function(e){return e.po_no===t})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),a=r.filter((function(e){return e.po_no===t}))[0].customer;s.push({mc_no:n,po_no:t,order_qty:i,ship_qty:c,customer:a})})),Et(s);var a=e.map((function(e){return e.mc_no})).filter((function(e,t,n){return n.indexOf(e)===t}));c(r.filter((function(e){return a.includes(e.mc_no)})))}})})}),5===M.position?Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(f,{alert:M})})}):null,2===M.position?Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(f,{alert:M})})}):null,3===M.position?Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(f,{alert:M})})}):null,Object(p.jsx)("div",{className:"flex-row "+(Ke?null:"hideSection"),children:Object(p.jsx)("div",{className:"flex-large ",children:Object(p.jsx)(w,{position:3})})}),4===M.position?Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsx)("div",{className:"flex-large",children:Object(p.jsx)(f,{alert:M})})}):null]})},I=function(e){return Object(p.jsx)("div",{className:"welcome",children:Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:"/static/img/booking.jpeg","aria-hidden":!0,alt:"MMG Overseas Booking",style:{width:"100%",height:"103%",border:0}})})})},q=function(e){var t=e.userProfile,n=Object(i.useState)(""),c=Object(s.a)(n,2),r=c[0],a=c[1];return Object(i.useEffect)((function(){a("/api/getPhoto/"+t.email)}),[t.email]),Object(p.jsx)(i.Fragment,{children:Object(p.jsxs)("div",{className:"userProfile ".concat("dev"===t.databaseSchema?"userProfile_dev_color":"userProfile_prod_color"),children:[Object(p.jsx)("div",{className:"userProfile_d userProfile_grid_d",children:Object(p.jsx)("img",{src:"dev"===t.databaseSchema?"static/img/macys_red_icon.png":"static/img/macys_blue_icon.png",alt:"",height:"60"})}),Object(p.jsx)("div",{className:"userProfile_e userProfile_grid_e",children:"inspection booking@mmgoverseas"}),Object(p.jsx)("div",{className:"userProfile_b userProfile_grid_b ",children:t.userName}),Object(p.jsx)("div",{className:"userProfile_c userProfile_grid_c"}),Object(p.jsxs)("div",{className:"userProfile_a userProfile_grid_a",children:[Object(p.jsx)("img",{src:r||"static/img/anonymous.jpg","aria-hidden":!0,alt:"...",width:"60",height:"60"})," "]})]})})};function E(e){var t=new Date(e).toTimeString(),n=new Date(e).toDateString()+" "+t,i=n.search("GMT+")-1;return n=n.substring(0,i)}var D=function(){var e=Object(i.useState)({}),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)(!1),l=Object(s.a)(r,2),u=l[0],j=l[1],m=Object(i.useState)(!1),b=Object(s.a)(m,2),h=b[0],f=b[1],_=Object(i.useState)(!1),g=Object(s.a)(_,2),v=g[0],x=g[1];Object(i.useEffect)((function(){Object(O.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){c(e.userProfile)})).catch((function(e){console.log(e)})))}),[]);return Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"flex-row",children:Object(p.jsxs)("div",{className:"flex-large",children:[Object(p.jsx)(q,{userProfile:n}),Object(p.jsxs)(a.a,{children:[Object(p.jsx)("nav",{children:Object(p.jsxs)("ul",{className:"app_header",children:[Object(p.jsx)("li",{children:Object(p.jsx)(a.b,{to:"/",onClick:function(){f(!1),x(!0)},className:"link",children:"Home"})}),Object(p.jsx)("li",{children:Object(p.jsx)(a.b,{to:"/appBooking",onClick:function(){f(!0),x(!1)},className:"link",children:"Booking"})}),Object(p.jsx)("li",{id:"print-booking-btn",onClick:function(e){var t="("+function(e){var t=new Date(e),n=7-t.getDay(),i=new Date(t.getTime()+24*n*60*60*1e3),c=i.getMonth()+1,r=i.getDate();return c.toString().padStart(2,"0")+"."+r.toString().padStart(2,"0")}(E(Date.now()))+" - "+function(e){var t=new Date(e),n=new Date(t.getTime()+24*(6-t.getDay()+7)*60*60*1e3),i=new Date(n.getTime()+6048e5),c=i.getMonth()+1,r=i.getDate();return c.toString().padStart(2,"0")+"."+r.toString().padStart(2,"0")}(E(Date.now()))+")";e="Booking Report for "+n.userName+" "+t+".xlsx",j(!0),Object(O.trackPromise)(fetch("/booking/api/printreport",{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",reportType:JSON.stringify("Multiple"),userProfile:JSON.stringify(n),localTime:JSON.stringify(E(Date.now()))}}).then((function(e){return e.blob()})).then((function(t){var n=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=n,i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i),j(!1)})),"printReport")},className:"link",children:"Print Booking"}),Object(p.jsx)("button",{className:"fa fa-sign-out",onClick:function(){localStorage.clear(),window.location="/logout"},children:"Logout"})]})}),!1===u?Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{path:"/",element:Object(p.jsx)(I,{env:n.environment})}),Object(p.jsx)(o.a,{path:"/appBooking",element:Object(p.jsx)(T,{})})]}):!0===h&&!1===v?Object(p.jsx)(o.c,{children:Object(p.jsx)(o.a,{path:"/appBooking",element:Object(p.jsx)(T,{})})}):Object(p.jsx)(w,{position:4})]})]})})})};r.a.render(Object(p.jsx)(D,{}),document.getElementById("root"))},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){}},[[150,1,2]]]);
//# sourceMappingURL=main.c066e372.chunk.js.map