(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n(22),s=n.n(c),a=(n(66),n(67),n(68),n(44),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(6)),r=n(33),o=n(7),l=n(15),d=n.n(l),u=n(43),j=n(55),m=n(5),b=n(8),h=n(1),p=function(e){var t=e.items,n=e.mcTable,c=e.addMC,s=e.currentSU,r=e.currentMF,o=e.editMode,l=e.setDisplayAlert,d=e.ship,u=e.setShip,j=e.poList,p=e.totalShip,f=e.totalInspect,O=e.totalSample,_=e.reset,v=e.handleDeletePO,x=e.setPOList,g=e.aqlTable,y=e.handleHighlight,S=e.checkedState,M=e.setCheckedState,N=e.deleteShipMulti,C=Object(i.useState)(""),T=Object(a.a)(C,2),I=T[0],w=T[1],k=Object(i.useState)(!0),q=Object(a.a)(k,2),P=q[0],E=q[1],D=Object(i.useState)([]),F=Object(a.a)(D,2),B=F[0],A=F[1];Object(i.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("itemTable_MCBtn").click())};return document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").addEventListener("keydown",e),function(){document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").removeEventListener("keydown",e)}}),[]),Object(i.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("highLightItemBtn").click())},t=document.getElementById("itemTotal_searchString");if(t)return t.addEventListener("keydown",e),function(){t.removeEventListener("keydown",e)}}),[]);var U=function(e,t){y("");var n=Object(b.a)(d);0===e&&"asc"===t?n.sort((function(e,t){return e.po_no>t.po_no?1:-1})):0===e&&"desc"===t?n.sort((function(e,t){return e.po_no<t.po_no?1:-1})):1===e&&"asc"===t?n.sort((function(e,t){return e.item_no>t.item_no?1:-1})):1===e&&"desc"===t&&n.sort((function(e,t){return e.item_no<t.item_no?1:-1})),u(n)},L=function(e,t){y("");var n=Object(b.a)(B);0===e&&"asc"===t?n.sort((function(e,t){return e.item_no>t.item_no?1:-1})):0===e&&"desc"===t&&n.sort((function(e,t){return e.item_no<t.item_no?1:-1})),A(n)},Q=function(e){var t=e.target.value;w(t)},R=function(e){l({message:e,position:1,timeout:1500,color:"alert__red"})},K=function(e,t){return function(n){var i=n.target.value,c=Object(b.a)(d),s=c.findIndex((function(n){return n.po_no===e&&n.item_no===t})),a=c.find((function(n){return n.po_no===e&&n.item_no===t}));c[s]=Object(m.a)(Object(m.a)({},a),{},{inspect_qty:parseInt(i)}),u(c)}},z=function(){for(var e=document.getElementsByName("selectRow"),t=0;t<e.length;t++)e[t].checked=!0,S[t]=!0;M(S)},H=function(){for(var e=document.getElementsByName("selectRow"),t=0;t<e.length;t++)e[t].checked=!1,S[t]=!1;M(S)};return Object(h.jsxs)("div",{className:"itemTable_2col",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"itemTable_Section",children:[Object(h.jsx)("div",{children:"Add MC:"}),"\xa0",Object(h.jsx)("div",{children:o?Object(h.jsx)("input",{type:"text",id:"itemTable_MC",name:"itemTable_MC",justify:"left",placeholder:"Additional MC here",onChange:Q}):Object(h.jsx)("input",{type:"text",id:"itemTable_MC",name:"itemTable_MC",justify:"left",placeholder:"Include additional MC here",readOnly:!0,onChange:Q})}),"\xa0\xa0",Object(h.jsx)("div",{children:o?Object(h.jsx)("i",{id:"itemTable_MCBtn",className:"fa fa-plus clickable",onClick:function(){!function(){var e=n.find((function(e){return e.mc_no===I})),i=t.find((function(e){return e.mc_no===I})),a=d.find((function(e){return e.mc_no===I})),o=n.find((function(e){return e.mc_no===I&&e.su_no===s&&e.mf_no===r}));e?o?a?R("MC was already entered in the ship item list, please check ! "):!e&&i||c(I):R("This MC seems not for this manufacturer!"):l({message:"This MC is not found in forthcoming or may not belong to this manufacturer!",position:1,timeout:4e3,color:"alert__red"})}()}}):null})]}),Object(h.jsxs)("div",{className:"itemTable_Header",children:[Object(h.jsx)("div",{children:"PO"}),Object(h.jsx)("div",{children:"DIV"}),Object(h.jsx)("div",{children:"Order Qty"}),Object(h.jsx)("div",{children:"Ship Qty"}),Object(h.jsx)("div",{children:"%Ship"}),Object(h.jsx)("div",{children:"Delete"}),Object(h.jsx)("div",{})]}),Object(h.jsx)("div",{id:"itemTableScroller",className:"itemTable_GridContainer",children:j?j.map((function(e,t){return Object(h.jsxs)("div",{className:"itemTable_Detail",children:[Object(h.jsx)("div",{children:e.po_no}),Object(h.jsx)("div",{children:e.customer}),Object(h.jsx)("div",{children:e.order_qty}),Object(h.jsx)("div",{children:e.ship_qty}),Object(h.jsxs)("div",{children:[Math.round(e.ship_qty/e.order_qty*100),"%"]}),Object(h.jsx)("div",{children:o?Object(h.jsx)("i",{className:"fa fa-times clickable",onClick:function(){v(e.mc_no,e.po_no)}}):null})]},t)})):null})]}),Object(h.jsx)("div",{}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"itemTotal_Section",children:[o?Object(h.jsxs)("div",{children:[P?"Summary":"Edit",o?Object(h.jsx)("i",{className:"fa fa-refresh itemTotal_undo_color clickable ",onClick:function(){!function(){var e=[],t=Object(b.a)(d);t.map((function(e){return e.item_no})).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(n){var i=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),c=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),s=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.sample_qty)}),0),a=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.inspect_qty)}),0);e.push({item_no:n,order_qty:i,ship_qty:c,sample_qty:s,inspect_qty:a})})),A(e),E((function(e){return!e}))}(),y("")}}):null]}):Object(h.jsx)("div",{}),o?Object(h.jsxs)("div",{children:["Multi Del\xa0",Object(h.jsx)("i",{className:"fa fa-times itemTotal_refresh_color clickable",onClick:function(){!function(){for(var e=Object(b.a)(d),t=document.getElementsByClassName("clickrow"),n=0;n<t.length;n++)if(S[n]){var i=e[n];i=Object(m.a)(Object(m.a)({},i),{},{del:!0}),e[n]=i}e=e.filter((function(e){return!e.del})),N(e),H()}()}})]}):Object(h.jsx)("div",{}),o?Object(h.jsxs)("div",{children:["Reset Inspect \xa0",Object(h.jsx)("i",{className:"fa fa-refresh itemTotal_refresh_color clickable",onClick:function(){_()}})]}):Object(h.jsx)("div",{}),Object(h.jsxs)("div",{children:["Highlight \xa0",Object(h.jsx)("input",{type:"text",name:"itemTotal_searchString",id:"itemTotal_searchString",justify:"left",onInput:function(e){return e.target.value=(""+e.target.value).toUpperCase()},placeholder:"Enter item#"}),"\xa0",Object(h.jsx)("i",{className:"fa fa-search clickable",id:"highLightItemBtn",onClick:function(){y(document.getElementById("itemTotal_searchString").value)}})]})]}),P?Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"itemTotal_Header",children:[Object(h.jsx)("div",{children:o?Object(h.jsx)("input",{type:"checkbox",name:"selectToggle",onChange:function(){document.getElementsByName("selectToggle")[0].checked?z():H()}}):null}),Object(h.jsxs)("div",{children:["PO",Object(h.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){U(0,"asc")}}),"\xa0",Object(h.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){U(0,"desc")}})]}),Object(h.jsxs)("div",{children:["By Item",Object(h.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){U(1,"asc")}}),"\xa0",Object(h.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){U(1,"desc")}})]}),Object(h.jsx)("div",{children:"Ship"}),Object(h.jsx)("div",{children:"Sample"}),Object(h.jsx)("div",{children:"Inspect"}),Object(h.jsx)("div",{children:"Delete"})]}),Object(h.jsx)("div",{id:"scroller",className:"itemTotal_GridContainer",children:d?d.map((function(e,t){return Object(h.jsxs)("div",{className:"itemTotal_Detail",children:[Object(h.jsx)("div",{children:o?Object(h.jsx)("input",{type:"checkbox",name:"selectRow",onChange:function(){return function(e){var t=S.map((function(t,n){return n===e?!t:t}));M(t)}(t)}}):null}),Object(h.jsx)("div",{children:e.po_no}),Object(h.jsx)("div",{children:e.item_no}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"number",id:"itemTotal_shipQty",name:"itemTotal_shipQty",value:e.ship_qty||1,min:"1",max:"30000",onChange:(n=e.po_no,i=e.item_no,function(e){var t=e.target.value;if(""!==t){parseInt(t)>3e4&&(t=3e4,l({message:"Number of ship units is too large!",position:1,timeout:3e3,color:"alert__red"}));var c=Object(b.a)(d),s=c.findIndex((function(e){return e.po_no===n&&e.item_no===i})),a=c.find((function(e){return e.po_no===n&&e.item_no===i}));c[s]=Object(m.a)(Object(m.a)({},a),{},{ship_qty:parseInt(t)});var r=c.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),o=g.filter((function(e){return e.size_start<=r&&e.size_end>=r}));c=c.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/r*o[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/r*o[0]["25sample"])})})),u(c);var h=c.filter((function(e){return e.po_no===n})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),p=Object(b.a)(j),f=p.findIndex((function(e){return e.po_no===n})),O=p.find((function(e){return e.po_no===n}));p[f]=Object(m.a)(Object(m.a)({},O),{},{ship_qty:h}),x(p)}}),readOnly:o?"":"readOnly"})}),Object(h.jsx)("div",{children:e.sample_qty}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"number",id:"itemTotal_InspectQty",name:"itemTotal_InspectQty",value:e.inspect_qty||1,min:"1",max:"30000",onChange:K(e.po_no,e.item_no),readOnly:o?"":"readOnly"})}),Object(h.jsx)("div",{children:o?Object(h.jsx)("i",{className:"fa fa-times clickable clickrow",onClick:function(){!function(e,t){var n=d.filter((function(n){return!(n.item_no===e&&n.po_no===t)}));N(n)}(e.item_no,e.po_no)}}):null})]},t);var n,i})):null})]}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"itemTotal_Header2",children:[Object(h.jsx)("div",{}),Object(h.jsxs)("div",{children:["By Item",Object(h.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){L(0,"asc")}}),"\xa0",Object(h.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){L(0,"desc")}})]}),Object(h.jsx)("div",{children:"Ship"}),Object(h.jsx)("div",{children:"Sample"}),Object(h.jsx)("div",{children:"Inspect"}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]}),Object(h.jsx)("div",{id:"scroller",className:"itemTotal_GridContainer",children:B?B.map((function(e,t){return Object(h.jsxs)("div",{className:"itemTotal_Detail",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:e.item_no}),Object(h.jsx)("div",{children:e.ship_qty}),Object(h.jsx)("div",{children:e.sample_qty}),Object(h.jsx)("div",{children:e.inspect_qty}),Object(h.jsx)("div",{})]},t)})):null})]}),P?Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"itemTotal_Header",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:" Total :"}),Object(h.jsx)("div",{children:p}),Object(h.jsx)("div",{children:O}),Object(h.jsx)("div",{className:O!==f?"highlightSection":null,children:f}),Object(h.jsx)("div",{})]})}):Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"itemTotal_Header2",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:" Total :"}),Object(h.jsx)("div",{children:p}),Object(h.jsx)("div",{children:O}),Object(h.jsx)("div",{className:O!==f?"highlightSection":null,children:f}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})})]})]})},f=function(e){var t=e.alert,n="alert ".concat(t.color);return Object(h.jsx)("h5",{className:n,children:t.message})},O=n(11),_=n(59),v=function(e){var t=Object(O.usePromiseTracker)({area:e.area}).promiseInProgress,n=e.spinnerMessage;return t&&Object(h.jsxs)("div",{style:{marginTop:"0.5rem",width:"100%",height:"30",display:"flex",justifyContent:"center",alignItems:"center",color:"green",fontWeight:"bold"},children:[n,Object(h.jsx)(_.a,{color:"green",height:30,width:100})]})},x=function(e){var t=e.checkDuplicateID,n=e.mcTable,c=e.setDisplayAlert,s=e.inspectionID,a=e.setInspectionID,r=e.clearScreen,o=e.searchInspByMC,l=e.editMode,d=e.inspType,u=e.showFull,j=function(e){var t=e.target.id,n=e.target.value;switch(t){case"searchKey_mc":a(Object(m.a)(Object(m.a)({},s),{},{mc:n})),n.length>=3?o(n):r();break;case"searchKey_iteration":a(Object(m.a)(Object(m.a)({},s),{},{iteration:n}));break;case"searchKey_type":a(Object(m.a)(Object(m.a)({},s),{},{type:n}))}};var b=function(e){c({message:e,position:0,timeout:3e3,color:"alert__red"})};return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsxs)("div",{className:"searchKey",children:[Object(h.jsxs)("div",{className:"searchKey_pair",children:[Object(h.jsx)("label",{children:"MC# : "}),Object(h.jsx)("input",{type:"text",name:"searchKey_mc",id:"searchKey_mc",onChange:j,readOnly:u?"readOnly":""})]}),Object(h.jsxs)("div",{className:"searchKey_pair",children:[Object(h.jsx)("label",{children:"Iteration : "}),Object(h.jsx)("input",{type:"number",name:"searchKey_iteration",id:"searchKey_iteration",placeholder:"Iteration",min:"1",max:"9",onChange:j,readOnly:u?"readOnly":""})]}),Object(h.jsxs)("div",{className:"searchKey_pair",children:[Object(h.jsx)("label",{children:"Type : "}),Object(h.jsxs)("select",{name:"searchKey_type",id:"searchKey_type",onChange:j,children:[Object(h.jsx)("option",{value:"Select",disabled:u?"disabled":"",children:"Select"}),d&&d.map((function(e){return Object(h.jsx)("option",{value:e.insp_type,disabled:u?"disabled":"",children:e.insp_type_long},e.insp_type)}))]})]}),Object(h.jsx)("div",{}),l?null:Object(h.jsx)("div",{children:""!==s.mc&&"Select"!==s.iteration&&""!==s.iteration&&"Select"!==s.type?Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:function(){!function(e){var i=n.find((function(t){return t.mc_no===e.mc}));r(),i?t(e):b("This MC doesn't exists or it doesn't belong to this manufacturer!")}(s)},children:"Create Inspection"})}):null})]}),Object(h.jsx)(v,{area:"searchKey"})]})},g=function(e){var t=e.handleSave,n=e.handleDelete,c=e.handleSearch,s=e.inspectionID,a=e.printReport,r=e.editMode,o=e.setEditMode,l=e.userProfile,d=e.misc,u=e.showFull,j=e.clearScreen,m=e.setDisplayAlert,b=e.oldMC,p=d.submitted,f=void 0!==l.ignore_submit&&l.ignore_submit,O=function(e){var i=e.target.id;if(o(!1),"save"===i&&t(!!p,!1),"saveAndEdit"===i&&t(!!p,!0),"edit"===i){if(b.current)return void m({message:"You can NOT edit inspecton with obsolete MC.  This is for view only !",position:0,timeout:2500,color:"alert__red"});o(!0)}"delete"===i&&n(s),"search"===i&&(o(!1),c(s)),"print"===i&&a("Inspection_Report.xlsx",!1),"print_draft"===i&&a("Inspection_Report.xlsx",!0),"cancel"===i&&(o(!1),j())};return Object(h.jsx)(i.Fragment,{children:Object(h.jsxs)("div",{className:"mainMenu",children:[Object(h.jsxs)("div",{className:"mainMenu_inspectionKey",children:["Inspection Key : \xa0\xa0",null,null]}),r?Object(h.jsx)("button",{id:"saveAndEdit",onClick:O,children:"Save & Edit"}):null,r?Object(h.jsx)("button",{id:"save",onClick:O,children:"Save"}):null,r?null:Object(h.jsx)("button",{id:"search",onClick:O,children:"Search"}),r||!u||p&&!f?null:Object(h.jsxs)("button",{id:"edit",onClick:O,children:["Edit\xa0",p&&u?Object(h.jsx)("i",{className:"fa fa-lock"}):null]}),!u||p&&!f?null:Object(h.jsx)("button",{id:"cancel",onClick:O,children:"Cancel"}),!r&&p?Object(h.jsx)("button",{id:"print",onClick:O,children:"Print"}):null,r||p||!u?null:Object(h.jsx)("button",{id:"print_draft",onClick:O,children:"Print"}),u&&f&&u?Object(h.jsx)("button",{id:"delete",onClick:O,className:"deleteButton",children:"Delete"}):null]})})},y=function(e){for(var t=e.setInspectionID,n=e.handleSearch,c=e.searchedMC,s=e.setShowSearchedMC,a=e.currentMF,r=[],o=0;o<c.length;o++)c[o].main.mf_no===a&&r.push(c[o]._id);return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsxs)("div",{className:"searchedMC",children:[Object(h.jsxs)("div",{className:"searchedMC_header1 searchedMC_header",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:"MC"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),Object(h.jsxs)("div",{className:"searchedMC_header2 searchedMC_header",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:"MC"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),Object(h.jsxs)("div",{className:"searchedMC_header3 searchedMC_header",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:"MC"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),r.length>0?r.map((function(e,i){return Object(h.jsxs)("div",{className:"searchedMC_detail",onClick:function(){var i;i={mc:e.mc,iteration:e.iteration,type:e.type},t(i),n(i),document.getElementById("searchKey_mc").value=i.mc,document.getElementById("searchKey_iteration").value=i.iteration,document.getElementById("searchKey_type").value=i.type,s(!1)},children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:e.mc}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:e.iteration}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:e.type})]},i)})):null]}),Object(h.jsx)(v,{area:"mfrSelection"})]})},S=function(e){var t=e.currentSU,n=e.currentMF,c=e.currentSUName,s=e.currentMFName,a=e.setSelectingSupplier,r=e.setShowFull,o=e.setMFRsearch;return Object(h.jsx)(i.Fragment,{children:t?Object(h.jsxs)("div",{className:"supplierInfo",children:[Object(h.jsx)("button",{onClick:function(){r(!1),o(""),a(!0)},children:"Select"}),Object(h.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoSU",id:"supplierInfo_bar",children:[c.toLowerCase()," (",t,")"]}),Object(h.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoMF",children:[s.toLowerCase()," (",n,")"]})]}):null})},M=function(e){var t=e.partyTable,n=e.setCurrentSU,c=e.setCurrentMF,s=e.setCurrentSUName,a=e.setCurrentMFName,r=e.selectingSupplier,o=e.setSelectingSupplier,l=e.setMFRsearch,d=e.mfrSearch,u=e.getMCtable,j=e.setEditMode;return Object(h.jsxs)(i.Fragment,{children:[t&&r?Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"mfrSelection_header",children:" Select a manufacturer below:"}),Object(h.jsx)("div",{className:"mfrSelection_input",children:Object(h.jsx)("input",{type:"text",id:"mfrSearch",name:"mfrSearch",value:d||"",justify:"left",onChange:function(e){var t=e.target.value;l(t.toUpperCase())},style:{textTransform:"uppercase"},placeholder:"Type to search"})})]}):null,t&&r?t.filter((function(e){return 0===d.length||"".concat(" ",e.SU_NAME," ",e.SU," ",e.MF," ",e.MF_NAME).search(d)>0})).map((function(e){return Object(h.jsxs)("div",{className:"mfrSelection",onClick:function(){var t,i,r,l;t=e.SU,i=e.MF,r=e.SU_NAME,l=e.MF_NAME,n(t),c(i),s(r),a(l),o(!1),u(t,i),j(!1)},children:[Object(h.jsxs)("div",{className:"mfrSelectionSU",children:[e.SU_NAME," (",e.SU,")"," "]}),Object(h.jsxs)("div",{className:"mfrSelectionMF",children:[e.MF_NAME," (",e.MF,")"," "]})]},e.SU.concat(e.MF))})):null]})},N=n(56),C=n.n(N),T=function(e){var t=e.setInspectionDate,n=e.inspectionDate,c=e.setMisc,s=e.misc,r=e.editMode,o=e.mqaMembers,l=e.userProfile,d=e.productCategories,u=Object(i.useState)(""),j=Object(a.a)(u,2),b=j[0],p=j[1];Object(i.useEffect)((function(){if(""===n){var e=new Date,i=6e4*e.getTimezoneOffset();e=new Date(e.getTime()-i),t(e.toISOString().substring(0,10))}}),[n,t]),Object(i.useEffect)((function(){var e=Object(m.a)({},s);void 0===e.qa_type&&void 0!==l&&void 0!==l.email&&(l.email.includes("@macys.com")?(e=Object(m.a)(Object(m.a)({},e),{},{qa_type:"MQA"}),c(e)):(e=Object(m.a)(Object(m.a)({},e),{},{qa_type:"SQA",sqa:l.email,governance_inspection:void 0,sqa_iteration:void 0,cap:void 0}),p(!0),c(e))),"SQA"===s.qa_type&&p(!0)}),[s,l,c]);var f=function(e,t){return function(n){var i=n.target.value;if(s){var a=Object(m.a)({},s);switch(e){case 2:a=Object(m.a)(Object(m.a)({},a),{},{product_type:i});break;case 7:a=Object(m.a)(Object(m.a)({},a),{},{governance_inspection:t});break;case 11:a=Object(m.a)(Object(m.a)({},a),{},{ship_window:i});break;case 15:a=Object(m.a)(Object(m.a)({},a),{},{qa_type:i}),"SQA"===i&&(a=Object(m.a)(Object(m.a)({},a),{},{sqa:l.email,governance_inspection:void 0,sqa_iteration:void 0,cap:void 0}),p(!0)),"MQA"===i&&void 0===a.mqa&&(a=Object(m.a)(Object(m.a)({},a),{},{mqa:l.email})),"MQA"===i&&p(!1);break;case 16:a=Object(m.a)(Object(m.a)({},a),{},{mqa:i});break;case 17:a=Object(m.a)(Object(m.a)({},a),{},{sqa:i});break;case 19:a=Object(m.a)(Object(m.a)({},a),{},{product_category:i});break;case 20:a=Object(m.a)(Object(m.a)({},a),{},{label:i});break;default:console.log("No element")}c(a)}}};return Object(h.jsxs)("div",{className:"misc",children:[Object(h.jsxs)("div",{className:"misc_a misc_grid_a ",children:[Object(h.jsx)("div",{className:"misc_title",children:"Governance Inspection (G)"}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"radio",id:"misc_governance_inspection_yes",name:"misc_governance_inspection",value:s.governance_inspection||"",checked:"Yes"===s.governance_inspection,onChange:f(7,"Yes"),disabled:r&&!b?"":"disabled"})}),Object(h.jsx)("div",{children:"Yes"}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"radio",id:"misc_governance_inspection_no",name:"misc_governance_inspection",value:s.governance_inspection||"",checked:"No"===s.governance_inspection,onChange:f(7,"No"),disabled:r&&!b?"":"disabled"})}),Object(h.jsx)("div",{children:"No"})]}),Object(h.jsx)("div",{className:"misc_b",children:Object(h.jsxs)("div",{className:"misc_title misc_grid_b",children:[Object(h.jsx)("div",{children:"Inspection Date (A)"}),Object(h.jsx)(C.a,{className:"datePicker",dateFormat:"MM/dd/yy",selected:function(e){var t=e;if(""===t){var n=6e4*(t=new Date).getTimezoneOffset();t=new Date(t.getTime()-n)}else{var i=6e4*(t=new Date(e)).getTimezoneOffset();t=new Date(t.getTime()+i)}return t}(n),onChange:function(e){return function(e){var n=6e4*e.getTimezoneOffset(),i=new Date(e.getTime()-n);t(i.toISOString().substring(0,10))}(e)},readOnly:r?"":"readOnly"})]})}),Object(h.jsxs)("div",{className:"misc_c misc_grid_c",children:[Object(h.jsx)("div",{className:"misc_title",children:"Ship Window (K)"}),Object(h.jsx)("input",{type:"text",id:"misc_shipWindow",name:"misc_shipWindow",value:s.ship_window||"",justify:"left",placeholder:"Ship Window",onChange:f(11),readOnly:r?"":"readOnly"})]}),Object(h.jsxs)("div",{className:"misc_d misc_grid_d",children:[Object(h.jsx)("div",{className:"misc_title",children:"QA Type (O)"}),Object(h.jsxs)("select",{id:"misc_qaType",name:"misc_qaType",value:s.qa_type||"Select",justify:"left",placeholder:"QA Type",onChange:f(15),children:[Object(h.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(h.jsx)("option",{value:"MQA",disabled:"disabled",children:"MQA"}),Object(h.jsx)("option",{value:"SQA",disabled:"disabled",children:"SQA"})]})]}),Object(h.jsxs)("div",{className:"misc_e misc_grid_e",children:[Object(h.jsx)("div",{className:"misc_title",children:"Product Type (B)"}),Object(h.jsx)("input",{type:"text",id:"misc_productType",name:"misc_productType",value:s.product_type||"",justify:"left",placeholder:"Product Type",onChange:f(2),readOnly:r?"":"readOnly",style:{textTransform:"uppercase"}})]}),Object(h.jsxs)("div",{className:"misc_f misc_grid_f",children:[Object(h.jsx)("div",{className:"misc_title",children:"MQA"===s.qa_type||void 0===s.qa_type?Object(h.jsx)("span",{children:"MQA (P)"}):Object(h.jsx)("span",{children:"SQA (P)"})}),"MQA"===s.qa_type||void 0===s.qa_type?Object(h.jsxs)("select",{id:"misc_mqa",name:"misc_mqa",value:s.mqa||"Select",justify:"left",placeholder:" ",onChange:f(16),children:[Object(h.jsx)("option",{value:"Select",children:"Select"}),o&&o.map((function(e){return Object(h.jsx)("option",{value:e.mqa,disabled:r?"":"disabled",children:e.mqa},e.mqa)}))]}):Object(h.jsx)("input",{type:"text",id:"misc_sqa",name:"misc_sqa",value:s.sqa||"",justify:"left",placeholder:"Inspector",onChange:f(17),readOnly:"readOnly"})]}),Object(h.jsxs)("div",{className:"misc_g misc_grid_g",children:[Object(h.jsx)("div",{className:"misc_title",children:"Brand (S)"}),Object(h.jsx)("input",{type:"text",id:"misc_label",name:"misc_label",value:s.label||"",justify:"left",onChange:f(20),readOnly:r?"":"readOnly",style:{textTransform:"uppercase"}})]}),Object(h.jsxs)("div",{className:"misc_h misc_grid_h",children:[Object(h.jsx)("div",{className:"misc_title",children:"Product Category (R)"}),Object(h.jsxs)("select",{id:"misc_product_category",name:"misc_product_category",value:s.product_category||"Select",justify:"left",placeholder:" ",onChange:f(19),children:[Object(h.jsx)("option",{value:"Select",children:"Select"}),d&&d.map((function(e){return Object(h.jsx)("option",{value:e.category,disabled:r?"":"disabled",children:e.category},e.category)}))]})]})]})},I=function(e){var t=e.position;return Object(h.jsxs)(i.Fragment,{children:[1===t?Object(h.jsx)(v,{area:"getUserProfile",spinnerMessage:"Loading your profile, please wait... "}):null,2===t?Object(h.jsxs)("div",{children:[Object(h.jsx)(v,{area:"printReport",spinnerMessage:"Preparing the report, please wait... "}),Object(h.jsx)(v,{area:"saveInspection",spinnerMessage:"Saving the changes, please wait... "}),Object(h.jsx)(v,{area:"deleteInspection",spinnerMessage:"Deleting, please wait... "}),Object(h.jsx)(v,{area:"createInspection",spinnerMessage:"Loading, please wait... "}),Object(h.jsx)(v,{area:"getMCtable",spinnerMessage:"Getting MC data, please wait... "})]}):null,3===t?Object(h.jsxs)("div",{children:[Object(h.jsx)(v,{area:"sharePointFiles",spinnerMessage:"Refreshing SharePoint info, please wait... "}),Object(h.jsx)(v,{area:"downloadSharePointfiles",spinnerMessage:"Downloading SharePoint info, please wait... "}),Object(h.jsx)(v,{area:"sharePointUpload",spinnerMessage:"Uploading file(s) to SharePoint, please wait... "})]}):null,10===t?Object(h.jsx)(v,{area:"pastInspection",spinnerMessage:"Loading past inspections, please wait... "}):null]})},w=function(){var e=Object(i.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(i.useState)(!1),r=Object(a.a)(s,2),o=r[0],l=r[1],_=Object(i.useState)([]),v=Object(a.a)(_,2),N=v[0],C=v[1],w=Object(i.useState)({position:100}),k=Object(a.a)(w,2),q=k[0],P=k[1],E=Object(i.useState)([]),D=Object(a.a)(E,2),F=D[0],B=D[1],A=Object(i.useState)([]),U=Object(a.a)(A,2),L=U[0],Q=U[1],R=Object(i.useState)(""),K=Object(a.a)(R,2),z=K[0],H=K[1],J=Object(i.useState)({mc:"",iteration:"Select",type:"Select"}),G=Object(a.a)(J,2),W=G[0],Y=G[1],V=Object(i.useState)([]),X=Object(a.a)(V,2),Z=X[0],$=X[1],ee=Object(i.useState)(""),te=Object(a.a)(ee,2),ne=te[0],ie=te[1],ce=Object(i.useState)(""),se=Object(a.a)(ce,2),ae=se[0],re=se[1],oe=Object(i.useState)([]),le=Object(a.a)(oe,2),de=le[0],ue=le[1],je=Object(i.useState)([]),me=Object(a.a)(je,2),be=me[0],he=me[1],pe=Object(i.useState)(""),fe=Object(a.a)(pe,2),Oe=fe[0],_e=fe[1],ve=Object(i.useState)(""),xe=Object(a.a)(ve,2),ge=xe[0],ye=xe[1],Se=Object(i.useState)(!0),Me=Object(a.a)(Se,2),Ne=Me[0],Ce=Me[1],Te=Object(i.useState)([]),Ie=Object(a.a)(Te,2),we=Ie[0],ke=Ie[1],qe=Object(i.useState)([]),Pe=Object(a.a)(qe,2),Ee=Pe[0],De=Pe[1],Fe=Object(i.useState)(!1),Be=Object(a.a)(Fe,2),Ae=Be[0],Ue=Be[1],Le=Object(i.useState)({}),Qe=Object(a.a)(Le,2),Re=Qe[0],Ke=Qe[1],ze=Object(i.useState)({}),He=Object(a.a)(ze,2),Je=He[0],Ge=He[1],We=Object(i.useState)(!1),Ye=Object(a.a)(We,2),Ve=Ye[0],Xe=Ye[1],Ze=Object(i.useState)([]),$e=Object(a.a)(Ze,2),et=$e[0],tt=$e[1],nt=Object(i.useState)([]),it=Object(a.a)(nt,2),ct=it[0],st=it[1],at=Object(i.useState)(""),rt=Object(a.a)(at,2),ot=rt[0],lt=rt[1],dt=Object(i.useState)(""),ut=Object(a.a)(dt,2),jt=ut[0],mt=ut[1],bt=Object(i.useState)(""),ht=Object(a.a)(bt,2),pt=ht[0],ft=ht[1],Ot=Object(i.useState)([]),_t=Object(a.a)(Ot,2),vt=_t[0],xt=_t[1],gt=Object(i.useState)([]),yt=Object(a.a)(gt,2),St=yt[0],Mt=yt[1],Nt=Object(i.useState)(0),Ct=Object(a.a)(Nt,2),Tt=Ct[0],It=Ct[1],wt=Object(i.useState)(0),kt=Object(a.a)(wt,2),qt=kt[0],Pt=kt[1],Et=Object(i.useState)(0),Dt=Object(a.a)(Et,2),Ft=Dt[0],Bt=Dt[1],At=Object(i.useState)([]),Ut=Object(a.a)(At,2),Lt=Ut[0],Qt=Ut[1],Rt=Object(i.useRef)(!1),Kt=Object(i.useRef)(""),zt=Object(i.useRef)(!1),Ht=Object(i.useState)([]),Jt=Object(a.a)(Ht,2),Gt=Jt[0],Wt=Jt[1];Object(i.useEffect)((function(){var e=document.querySelector(":root"),t=navigator.userAgent.toLowerCase();/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(t)?e.style.setProperty("--changeTrack_scroll_width","7fr"):e.style.setProperty("--changeTrack_scroll_width","6.7fr"),t.includes("safari")&&t.includes("macintosh")&&e.style.setProperty("--changeTrack_scroll_width","7fr"),Object(O.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){$(e.userProfile),B(e.mcTable),he(e.partyTable),ke(e.mfList),De(e.aqlTable),st(e.checkListTemplate),mt(e.mqaMembers),ft(e.productCategories),xt(e.inspType)})).catch((function(e){console.log(e),Zt({message:"Error getting user's profile at this moment, please try again !",position:0,timeout:3e3,color:"alert__red"})})),"getUserProfile")}),[]);var Yt=function(e){e=e.trim();var t,n,i,c=document.getElementsByClassName("itemTotal_Detail"),s=c.length,a=-1;for(n=0;n<s;n++)c[n].style.backgroundColor="#0746f54d";for(t=0;t<s;t++){c[t].getElementsByTagName("div")[2].innerHTML.includes(e)&&""!==e&&(c[t].style.backgroundColor="yellow",-1===a&&(a=t))}for(a>0&&(document.getElementById("scroller").scrollTo(0,0),i=document.getElementById("scroller").scrollHeight/s*a,document.getElementById("scroller").scrollBy(0,i)),s=(c=document.getElementsByClassName("itemTable_Detail")).length,a=-1,n=0;n<s;n++)c[n].style.backgroundColor="#0746f54d";for(t=0;t<s;t++){c[t].children[2].innerHTML.includes(e)&&""!==e&&(c[t].style.backgroundColor="yellow",-1===a&&(a=t))}a>0&&(document.getElementById("itemTableScroller").scrollTo(0,0),i=document.getElementById("itemTableScroller").scrollHeight/s*a,document.getElementById("itemTableScroller").scrollBy(0,i))};Object(i.useEffect)((function(){var e=Object(b.a)(St),t=e.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),n=e.reduce((function(e,t){return e+parseInt(t.inspect_qty)}),0);if(It(t),Pt(n),t>0){var i=Ee.filter((function(e){return e.size_start<=t&&e.size_end>=t}))[0]["25sample"];Bt(i)}else Bt(0)}),[St,Ee]);var Vt=function(e,t){be.map((function(t){return t.SU===e?_e(t.SU_NAME):null})),be.map((function(e){return e.MF===t?ye(e.MF_NAME):null}))},Xt=function(e){var t,i=F.filter((function(t){return t.mc_no===e}));!function(e){zt.current=!1;var t=Object(b.a)(n).concat(e);c(t);var i=St.concat(e.map((function(e){return{mc_no:e.mc_no,po_no:e.po_no,order_qty:e.order_qty,item_no:e.item_no,ship_qty:e.ship_qty}}))),s=i.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),a=Ee.filter((function(e){return e.size_start<=s&&e.size_end>=s})),r=i.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/s*a[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/s*a[0]["25sample"])})}));Mt(r);var o=[];r.map((function(e){return e.po_no})).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(e){var n=t.filter((function(t){return t.po_no===e}))[0].mc_no,i=t.filter((function(t){return t.po_no===e})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),c=r.filter((function(t){return t.po_no===e})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),s=t.filter((function(t){return t.po_no===e}))[0].customer;o.push({mc_no:n,po_no:e,order_qty:i,ship_qty:c,customer:s})})),Qt(o)}(i),t=void 0===Re.ship_window||0===Re.ship_window.length?i[0].ship_window:Re.ship_window.concat(", ").concat(i[0].ship_window);for(var s=i[0].item_desc,a=Re.fibre_content,r=0;r<i.length;r++)if(i[r].fabric_note.length>0){a=i[r].fabric_note;break}var o=i[0].label;Ke(Object(m.a)(Object(m.a)({},Re),{},{ship_window:t,product_type:s,fibre_content:a,label:o})),Vt(ne,ae),Xe(!0),Ue(!0),an(),H("")},Zt=function(e){P(e),setTimeout((function(){P({position:100})}),e.timeout)},$t=function(e){Object(O.trackPromise)(d()({url:"/booking/api/search",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({_id:e})}).then((function(e){return e.data})).then((function(t){zt.current=!1;var n=t.main.mf_no;if(0===t.items.length&&n===ae)console.log("Empty inspection record with mf# :",n);else{if(n!==ae)return void Zt({message:"This MC does not belong to this manufacturer!",position:0,timeout:1500,color:"alert__red"});0===F.filter((function(t){return t.mc_no===e.mc})).length&&(zt.current=!0)}Xe(!0),Rt.current=!0,c(t.items),Mt(t.itemsTotal),Qt(t.poList),H(t.main.inspection_date),Ge(t.main),Ke(t.misc?t.misc:{}),Vt(t.main.su_no,t.main.mf_no),void 0===t.update_history?tt([]):tt(t.update_history);var i=new Array(t.itemsTotal.length).fill(!1);Wt(i)})).catch((function(e){406===e.response.status?Zt({message:"Not a valid MC for this manufacturer !",position:0,timeout:2e3,color:"alert__red"}):501===e.response.status?window.location="/login/timeout":Zt({message:"No such Inspection ID, please try again !",position:0,timeout:2e3,color:"alert__red"})})),"searchKey")},en=function(){c([]),Mt([]),Qt([]),C([]),Q([]),ue([]),l(!1),Ke([]),Ge([]),Xe(!1),Ue(!1),Kt.current="",document.getElementById("itemTable_MC").value="",document.getElementById("itemTotal_searchString")&&(document.getElementById("itemTotal_searchString").value=""),Wt([])},tn=function(e){return new Promise((function(t){return setTimeout(t,e)}))},nn=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zt({message:"Session timeout, please login again !",position:0,timeout:3e3,color:"alert__red"}),e.next=3,tn(3e3);case 3:window.location="/login/timeout";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cn=function(e){l(!0),Object(O.trackPromise)(d()({url:"/booking/api/searchInspByMC",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({mc:e,mfList:we})}).then((function(e){return e.data})).then((function(e){ue(e)})).catch((function(e){501===e.response.status?nn():Zt({message:"Something went wrong !",position:0,timeout:2e3,color:"alert__red"})})),"mfrSelection")};function sn(e){var t=new Date(e).toTimeString(),n=new Date(e).toDateString()+" "+t,i=n.search("GMT+")-1;return n=n.substring(0,i)}var an=function(){var e=Object(b.a)(ct);e.sort((function(e,t){return e.id-t.id})),Q(e)};return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)(S,{currentSU:ne,currentMF:ae,currentSUName:Oe,currentMFName:ge,setSelectingSupplier:Ce,setShowFull:Xe,setMFRsearch:lt}),Object(h.jsx)(M,{partyTable:be,setCurrentSU:ie,setCurrentMF:re,setCurrentSUName:_e,setCurrentMFName:ye,selectingSupplier:Ne,setSelectingSupplier:Ce,setMFRsearch:lt,mfrSearch:ot,getMCtable:function(e,t){Object(O.trackPromise)(d()({url:"/booking/api/getMCtable",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({su:e,mf:t})}).then((function(e){return e.data})).then((function(e){B(e)})).catch((function(e){Zt({message:"Error getting MC",position:4,timeout:1500,color:"alert__red"})})),"getMCtable")},setEditMode:Ue}),Object(h.jsx)(I,{position:1}),Object(h.jsx)(g,{handleSave:function(e,t){if(void 0===Re.qa_type||void 0===Re.sqa&&void 0===Re.mqa)return Zt({message:"QA Type and QA must be identified !",position:0,timeout:3e3,color:"alert__red"}),void Ue(!0);var i={su_no:ne,mf_no:ae,inspection_date:z,submitted:e},c={mc:W.mc,iteration:W.iteration,type:W.type},s=Object(m.a)({},Re);s=Object(m.a)({},s),Object(O.trackPromise)(d()({url:"/booking/api/save",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:c,main:i,misc:s,mf:ae,checkList:L,items:n,itemsTotal:St,poList:Lt,defects:N,updateHistory:et,folder:"SU"+ne+"MF"+ae,inspection_id:W.mc+"-"+W.iteration+"-"+W.type})}).then((function(e){Zt({message:"Saved Successfully !",position:0,timeout:1e3,color:"alert__green"}),t?Ue(!0):en()})).catch((function(e){var t="There was an error saving this record, please contact the admin !!";e.message.includes("500")?t=e.response.data:Zt({message:t,position:0,timeout:4e3,color:"alert__red"}),Zt({message:t,position:0,timeout:4e3,color:"alert__red"})})),"saveInspection")},handleSearch:$t,inspectionID:W,handleDelete:function(e){!0===window.confirm("Are you sure you want to delete this inspection ? ")&&Object(O.trackPromise)(d()({url:"/booking/api/delete",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(e){return 200===e.status?(en(),Zt({message:"Deleted successfully !",position:0,timeout:1500,color:"alert__green"})):null})).catch((function(e){Zt({message:"Error deleting the inspection ID !",position:0,timeout:1500,color:"alert__red"})})),"deleteInspection")},printReport:function(e,t){void 0!==Re.qa_type?"MQA"!==Re.qa_type||void 0!==Re.mqa&&"Select"!==Re.mqa?(e="MMG Inspection Report - "+W.mc+"-"+W.iteration+"-"+W.type+".xlsx",Object(O.trackPromise)(fetch("/printreport",{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",inspectionID:JSON.stringify({inspectionID:W}),localTime:JSON.stringify(sn(Date.now()))}}).then((function(e){return e.blob()})).then((function(t){var n=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=n,i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)})),"printReport")):Zt({message:"MQA must be specified !",position:0,timeout:2e3,color:"alert__red"}):Zt({message:"QA Type must be chosen !",position:0,timeout:2e3,color:"alert__red"})},editMode:Ae,setEditMode:Ue,userProfile:Z,main:Je,misc:Re,showFull:Ve,clearScreen:en,setDisplayAlert:Zt,oldMC:zt}),Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)(x,{checkDuplicateID:function(e){Object(O.trackPromise)(d()({url:"/booking/api/checkDuplicateID",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(t){return 200===t.status?void Zt({message:"This key has been used by previous inspection ! Please check and or consider a new iteration!",position:0,timeout:3e3,color:"alert__red"}):Xt(e.mc)})),"createInspection")},mcTable:F,setDisplayAlert:Zt,inspectionID:W,setInspectionID:Y,clearScreen:en,searchInspByMC:cn,currentSU:ne,currentMF:ae,editMode:Ae,inspType:vt,showFull:Ve}),o?Object(h.jsx)(y,{inspectionID:W,setInspectionID:Y,handleSearch:$t,searchInspByMC:cn,searchedMC:de,setShowSearchedMC:l,currentMF:ae}):null]})})}),0===q.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:q})})}):null,Object(h.jsx)(I,{position:2}),Object(h.jsx)("div",{className:"flex-row "+(Ve?null:"hideSection"),children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(i.Fragment,{children:Object(h.jsx)(T,{setInspectionDate:H,inspectionDate:z,setMisc:Ke,misc:Re,editMode:Ae,mqaMembers:jt,productCategories:pt,userProfile:Z,items:n})})})}),1===q.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:q})})}):null,Object(h.jsx)("div",{className:"flex-row "+(Ve?null:"hideSection"),children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(p,{setItems:c,items:n,mcTable:F,addMC:Xt,currentSU:ne,currentMF:ae,editMode:Ae,aqlTable:Ee,setDisplayAlert:Zt,ship:St,setShip:Mt,poList:Lt,setPOList:Qt,totalShip:Tt,setTotalShip:It,totalInspect:qt,setTotalInspect:Pt,totalSample:Ft,setTotalSample:Bt,reset:function(){Mt((function(e){return e.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{inspect_qty:e.sample_qty})}))}))},handleDeletePO:function(e,t){Yt("");var i=Object(b.a)(St);i=i.filter((function(e){return e.po_no!==t}));var s=(i=St.filter((function(e){return!(e.po_no===t)}))).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),a=Ee.filter((function(e){return e.size_start<=s&&e.size_end>=s}));i=i.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/s*a[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/s*a[0]["25sample"])})})),Mt(i),Qt((function(e){return e.filter((function(e){return e.po_no!==t}))}));var r=n.map((function(e){return e.mc_no})).filter((function(e,t,n){return n.indexOf(e)===t})),o=i.map((function(e){return e.mc_no})).filter((function(e,t,n){return n.indexOf(e)===t}));r.length>o.length&&c((function(t){return t.filter((function(t){return t.mc_no!==e}))}))},handleHighlight:Yt,checkedState:Gt,setCheckedState:Wt,deleteShipMulti:function(e){Yt("");var t=e.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),i=Ee.filter((function(e){return e.size_start<=t&&e.size_end>=t}));e=e.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/t*i[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/t*i[0]["25sample"])})})),Mt(e);var s=Object(b.a)(n),a=[];e.map((function(e){return e.po_no})).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(t){var n=s.filter((function(e){return e.po_no===t}))[0].mc_no,i=s.filter((function(e){return e.po_no===t})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),c=e.filter((function(e){return e.po_no===t})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),r=s.filter((function(e){return e.po_no===t}))[0].customer;a.push({mc_no:n,po_no:t,order_qty:i,ship_qty:c,customer:r})})),Qt(a);var r=e.map((function(e){return e.mc_no})).filter((function(e,t,n){return n.indexOf(e)===t}));c(s.filter((function(e){return r.includes(e.mc_no)})))}})})}),5===q.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:q})})}):null,2===q.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:q})})}):null,3===q.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:q})})}):null,Object(h.jsx)("div",{className:"flex-row "+(Ve?null:"hideSection"),children:Object(h.jsx)("div",{className:"flex-large ",children:Object(h.jsx)(I,{position:3})})}),4===q.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:q})})}):null]})},k=function(e){return Object(h.jsx)("div",{className:"welcome",children:Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:"/static/img/booking.jpeg","aria-hidden":!0,alt:"MMG Overseas Booking",style:{width:"100%",height:"103%",border:0}})})})},q=function(e){var t=e.userProfile,n=Object(i.useState)(""),c=Object(a.a)(n,2),s=c[0],r=c[1];return Object(i.useEffect)((function(){r("/api/getPhoto/"+t.email)}),[t.email]),Object(h.jsx)(i.Fragment,{children:Object(h.jsxs)("div",{className:"userProfile ".concat("dev"===t.databaseSchema?"userProfile_dev_color":"userProfile_prod_color"),children:[Object(h.jsx)("div",{className:"userProfile_d userProfile_grid_d",children:Object(h.jsx)("img",{src:"static/img/macys-header.jpg","aria-hidden":!0,alt:"",width:"60",height:"60"})}),Object(h.jsx)("div",{className:"userProfile_e userProfile_grid_e",children:"Inspection Booking"}),Object(h.jsxs)("div",{className:"userProfile_b userProfile_grid_b",children:[t.userName," "]}),Object(h.jsxs)("div",{className:"userProfile_a userProfile_grid_a",children:[Object(h.jsx)("img",{src:s,"aria-hidden":!0,alt:"Searching for photo...",width:"60",height:"60"})," "]})]})})},P=function(){var e=Object(i.useState)({}),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(i.useEffect)((function(){Object(O.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){c(e.userProfile)})).catch((function(e){console.log(e)})))}),[]),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsxs)("div",{className:"flex-large",children:[Object(h.jsx)(q,{userProfile:n}),Object(h.jsxs)(r.a,{children:[Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{className:"app_header",children:[Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/",className:"link",children:"Home"})}),Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/appInspection",className:"link",children:"Inspection"})}),Object(h.jsx)("button",{className:"fa fa-sign-out",onClick:function(){localStorage.clear(),window.location="/logout"},children:"Logout"})]})}),Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{path:"/",element:Object(h.jsx)(k,{env:n.environment})}),Object(h.jsx)(o.a,{path:"/appInspection",element:Object(h.jsx)(w,{})})]})]})]})})})};s.a.render(Object(h.jsx)(P,{}),document.getElementById("root"))},44:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){}},[[150,1,2]]]);
//# sourceMappingURL=main.f0b55ef9.chunk.js.map