(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n(22),a=n.n(c),s=(n(66),n(67),n(68),n(44),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(6)),r=n(33),o=n(7),l=n(15),d=n.n(l),u=n(43),j=n(55),m=n(5),b=n(8),h=n(1),p=function(e){var t=e.items,n=e.mcTable,c=e.addMC,a=e.currentSU,r=e.currentMF,o=e.editMode,l=e.setDisplayAlert,d=e.ship,u=e.setShip,j=e.poList,p=e.totalShip,f=e.totalInspect,O=e.totalSample,_=e.reset,v=e.handleDeletePO,x=e.setPOList,g=e.aqlTable,y=e.handleHighlight,S=e.checkedState,M=e.setCheckedState,C=e.deleteShipMulti,N=Object(i.useState)(""),T=Object(s.a)(N,2),k=T[0],w=T[1],I=Object(i.useState)(!0),q=Object(s.a)(I,2),P=q[0],E=q[1],D=Object(i.useState)([]),B=Object(s.a)(D,2),F=B[0],A=B[1];Object(i.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("itemTable_MCBtn").click())};return document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").addEventListener("keydown",e),function(){document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").removeEventListener("keydown",e)}}),[]),Object(i.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("highLightItemBtn").click())},t=document.getElementById("itemTotal_searchString");if(t)return t.addEventListener("keydown",e),function(){t.removeEventListener("keydown",e)}}),[]);var U=function(e,t){y("");var n=Object(b.a)(d);0===e&&"asc"===t?n.sort((function(e,t){return e.po_no>t.po_no?1:-1})):0===e&&"desc"===t?n.sort((function(e,t){return e.po_no<t.po_no?1:-1})):1===e&&"asc"===t?n.sort((function(e,t){return e.item_no>t.item_no?1:-1})):1===e&&"desc"===t&&n.sort((function(e,t){return e.item_no<t.item_no?1:-1})),u(n)},Q=function(e,t){y("");var n=Object(b.a)(F);0===e&&"asc"===t?n.sort((function(e,t){return e.item_no>t.item_no?1:-1})):0===e&&"desc"===t&&n.sort((function(e,t){return e.item_no<t.item_no?1:-1})),A(n)},L=function(e){var t=e.target.value;w(t)},R=function(e){l({message:e,position:1,timeout:1500,color:"alert__red"})},K=function(e,t){return function(n){var i=n.target.value,c=Object(b.a)(d),a=c.findIndex((function(n){return n.po_no===e&&n.item_no===t})),s=c.find((function(n){return n.po_no===e&&n.item_no===t}));c[a]=Object(m.a)(Object(m.a)({},s),{},{inspect_qty:parseInt(i)}),u(c)}},z=function(){for(var e=document.getElementsByName("selectRow"),t=0;t<e.length;t++)e[t].checked=!0,S[t]=!0;M(S)},H=function(){for(var e=document.getElementsByName("selectRow"),t=0;t<e.length;t++)e[t].checked=!1,S[t]=!1;M(S)};return Object(h.jsxs)("div",{className:"itemTable_2col",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"itemTable_Section",children:[Object(h.jsx)("div",{children:"Add MC:"}),"\xa0",Object(h.jsx)("div",{children:o?Object(h.jsx)("input",{type:"text",id:"itemTable_MC",name:"itemTable_MC",justify:"left",placeholder:"Additional MC here",onChange:L}):Object(h.jsx)("input",{type:"text",id:"itemTable_MC",name:"itemTable_MC",justify:"left",placeholder:"Include additional MC here",readOnly:!0,onChange:L})}),"\xa0\xa0",Object(h.jsx)("div",{children:o?Object(h.jsx)("i",{id:"itemTable_MCBtn",className:"fa fa-plus clickable",onClick:function(){!function(){var e=n.find((function(e){return e.mc_no===k})),i=t.find((function(e){return e.mc_no===k})),s=d.find((function(e){return e.mc_no===k})),o=n.find((function(e){return e.mc_no===k&&e.su_no===a&&e.mf_no===r}));e?o?s?R("MC was already entered in the ship item list, please check ! "):!e&&i||c(k):R("This MC seems not for this manufacturer!"):l({message:"This MC is not found in forthcoming or may not belong to this manufacturer!",position:1,timeout:4e3,color:"alert__red"})}()}}):null})]}),Object(h.jsxs)("div",{className:"itemTable_Header",children:[Object(h.jsx)("div",{children:"PO"}),Object(h.jsx)("div",{children:"DIV"}),Object(h.jsx)("div",{children:"Order Qty"}),Object(h.jsx)("div",{children:"Ship Qty"}),Object(h.jsx)("div",{children:"%Ship"}),Object(h.jsx)("div",{children:"Delete"}),Object(h.jsx)("div",{})]}),Object(h.jsx)("div",{id:"itemTableScroller",className:"itemTable_GridContainer",children:j?j.map((function(e,t){return Object(h.jsxs)("div",{className:"itemTable_Detail",children:[Object(h.jsx)("div",{children:e.po_no}),Object(h.jsx)("div",{children:e.customer}),Object(h.jsx)("div",{children:e.order_qty}),Object(h.jsx)("div",{children:e.ship_qty}),Object(h.jsxs)("div",{children:[Math.round(e.ship_qty/e.order_qty*100),"%"]}),Object(h.jsx)("div",{children:o?Object(h.jsx)("i",{className:"fa fa-times clickable",onClick:function(){v(e.mc_no,e.po_no)}}):null})]},t)})):null})]}),Object(h.jsx)("div",{}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"itemTotal_Section",children:[o?Object(h.jsxs)("div",{children:[P?"Summary":"Edit",o?Object(h.jsx)("i",{className:"fa fa-refresh itemTotal_undo_color clickable ",onClick:function(){!function(){var e=[],t=Object(b.a)(d);t.map((function(e){return e.item_no})).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(n){var i=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),c=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),a=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.sample_qty)}),0),s=t.filter((function(e){return e.item_no===n})).reduce((function(e,t){return e+parseInt(t.inspect_qty)}),0);e.push({item_no:n,order_qty:i,ship_qty:c,sample_qty:a,inspect_qty:s})})),A(e),E((function(e){return!e}))}(),y("")}}):null]}):Object(h.jsx)("div",{}),o?Object(h.jsxs)("div",{children:["Multi Del\xa0",Object(h.jsx)("i",{className:"fa fa-times itemTotal_refresh_color clickable",onClick:function(){!function(){for(var e=Object(b.a)(d),t=document.getElementsByClassName("clickrow"),n=0;n<t.length;n++)if(S[n]){var i=e[n];i=Object(m.a)(Object(m.a)({},i),{},{del:!0}),e[n]=i}e=e.filter((function(e){return!e.del})),C(e),H()}()}})]}):Object(h.jsx)("div",{}),o?Object(h.jsxs)("div",{children:["Reset Inspect \xa0",Object(h.jsx)("i",{className:"fa fa-refresh itemTotal_refresh_color clickable",onClick:function(){_()}})]}):Object(h.jsx)("div",{}),Object(h.jsxs)("div",{children:["Highlight \xa0",Object(h.jsx)("input",{type:"text",name:"itemTotal_searchString",id:"itemTotal_searchString",justify:"left",onInput:function(e){return e.target.value=(""+e.target.value).toUpperCase()},placeholder:"Enter item#"}),"\xa0",Object(h.jsx)("i",{className:"fa fa-search clickable",id:"highLightItemBtn",onClick:function(){y(document.getElementById("itemTotal_searchString").value)}})]})]}),P?Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"itemTotal_Header",children:[Object(h.jsx)("div",{children:o?Object(h.jsx)("input",{type:"checkbox",name:"selectToggle",onChange:function(){document.getElementsByName("selectToggle")[0].checked?z():H()}}):null}),Object(h.jsxs)("div",{children:["PO",Object(h.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){U(0,"asc")}}),"\xa0",Object(h.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){U(0,"desc")}})]}),Object(h.jsxs)("div",{children:["By Item",Object(h.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){U(1,"asc")}}),"\xa0",Object(h.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){U(1,"desc")}})]}),Object(h.jsx)("div",{children:"Ship"}),Object(h.jsx)("div",{children:"Sample"}),Object(h.jsx)("div",{children:"Inspect"}),Object(h.jsx)("div",{children:"Delete"})]}),Object(h.jsx)("div",{id:"scroller",className:"itemTotal_GridContainer",children:d?d.map((function(e,t){return Object(h.jsxs)("div",{className:"itemTotal_Detail",children:[Object(h.jsx)("div",{children:o?Object(h.jsx)("input",{type:"checkbox",name:"selectRow",onChange:function(){return function(e){var t=S.map((function(t,n){return n===e?!t:t}));M(t)}(t)}}):null}),Object(h.jsx)("div",{children:e.po_no}),Object(h.jsx)("div",{children:e.item_no}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"number",id:"itemTotal_shipQty",name:"itemTotal_shipQty",value:e.ship_qty||1,min:"1",max:"30000",onChange:(n=e.po_no,i=e.item_no,function(e){var t=e.target.value;if(""!==t){parseInt(t)>3e4&&(t=3e4,l({message:"Number of ship units is too large!",position:1,timeout:3e3,color:"alert__red"}));var c=Object(b.a)(d),a=c.findIndex((function(e){return e.po_no===n&&e.item_no===i})),s=c.find((function(e){return e.po_no===n&&e.item_no===i}));c[a]=Object(m.a)(Object(m.a)({},s),{},{ship_qty:parseInt(t)});var r=c.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),o=g.filter((function(e){return e.size_start<=r&&e.size_end>=r}));c=c.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/r*o[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/r*o[0]["25sample"])})})),u(c);var h=c.filter((function(e){return e.po_no===n})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),p=Object(b.a)(j),f=p.findIndex((function(e){return e.po_no===n})),O=p.find((function(e){return e.po_no===n}));p[f]=Object(m.a)(Object(m.a)({},O),{},{ship_qty:h}),x(p)}}),readOnly:o?"":"readOnly"})}),Object(h.jsx)("div",{children:e.sample_qty}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"number",id:"itemTotal_InspectQty",name:"itemTotal_InspectQty",value:e.inspect_qty||1,min:"1",max:"30000",onChange:K(e.po_no,e.item_no),readOnly:o?"":"readOnly"})}),Object(h.jsx)("div",{children:o?Object(h.jsx)("i",{className:"fa fa-times clickable clickrow",onClick:function(){!function(e,t){var n=d.filter((function(n){return!(n.item_no===e&&n.po_no===t)}));C(n)}(e.item_no,e.po_no)}}):null})]},t);var n,i})):null})]}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"itemTotal_Header2",children:[Object(h.jsx)("div",{}),Object(h.jsxs)("div",{children:["By Item",Object(h.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){Q(0,"asc")}}),"\xa0",Object(h.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){Q(0,"desc")}})]}),Object(h.jsx)("div",{children:"Ship"}),Object(h.jsx)("div",{children:"Sample"}),Object(h.jsx)("div",{children:"Inspect"}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]}),Object(h.jsx)("div",{id:"scroller",className:"itemTotal_GridContainer",children:F?F.map((function(e,t){return Object(h.jsxs)("div",{className:"itemTotal_Detail",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:e.item_no}),Object(h.jsx)("div",{children:e.ship_qty}),Object(h.jsx)("div",{children:e.sample_qty}),Object(h.jsx)("div",{children:e.inspect_qty}),Object(h.jsx)("div",{})]},t)})):null})]}),P?Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"itemTotal_Header",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:" Total :"}),Object(h.jsx)("div",{children:p}),Object(h.jsx)("div",{children:O}),Object(h.jsx)("div",{className:O!==f?"highlightSection":null,children:f}),Object(h.jsx)("div",{})]})}):Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"itemTotal_Header2",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:" Total :"}),Object(h.jsx)("div",{children:p}),Object(h.jsx)("div",{children:O}),Object(h.jsx)("div",{className:O!==f?"highlightSection":null,children:f}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})})]})]})},f=function(e){var t=e.alert,n="alert ".concat(t.color);return Object(h.jsx)("h5",{className:n,children:t.message})},O=n(11),_=n(59),v=function(e){var t=Object(O.usePromiseTracker)({area:e.area}).promiseInProgress,n=e.spinnerMessage;return t&&Object(h.jsxs)("div",{style:{marginTop:"0.5rem",width:"100%",height:"30",display:"flex",justifyContent:"center",alignItems:"center",color:"green",fontWeight:"bold"},children:[n,Object(h.jsx)(_.a,{color:"green",height:30,width:100})]})},x=function(e){var t=e.checkDuplicateID,n=e.mcTable,c=e.setDisplayAlert,a=e.inspectionID,s=e.setInspectionID,r=e.clearScreen,o=e.searchInspByMC,l=e.editMode,d=e.inspType,u=e.showFull,j=function(e){var t=e.target.id,n=e.target.value;switch(t){case"searchKey_mc":s(Object(m.a)(Object(m.a)({},a),{},{mc:n})),n.length>=3?o(n):r();break;case"searchKey_iteration":s(Object(m.a)(Object(m.a)({},a),{},{iteration:n}));break;case"searchKey_type":s(Object(m.a)(Object(m.a)({},a),{},{type:n}))}};var b=function(e){c({message:e,position:0,timeout:3e3,color:"alert__red"})};return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsxs)("div",{className:"searchKey",children:[Object(h.jsxs)("div",{className:"searchKey_pair",children:[Object(h.jsx)("label",{children:"MC# : "}),Object(h.jsx)("input",{type:"text",name:"searchKey_mc",id:"searchKey_mc",onChange:j,readOnly:u?"readOnly":""})]}),Object(h.jsxs)("div",{className:"searchKey_pair",children:[Object(h.jsx)("label",{children:"Iteration : "}),Object(h.jsx)("input",{type:"number",name:"searchKey_iteration",id:"searchKey_iteration",placeholder:"Iteration",min:"1",max:"9",onChange:j,readOnly:u?"readOnly":""})]}),Object(h.jsxs)("div",{className:"searchKey_pair",children:[Object(h.jsx)("label",{children:"Type : "}),Object(h.jsxs)("select",{name:"searchKey_type",id:"searchKey_type",onChange:j,children:[Object(h.jsx)("option",{value:"Select",disabled:u?"disabled":"",children:"Select"}),d&&d.map((function(e){return Object(h.jsx)("option",{value:e.insp_type,disabled:u?"disabled":"",children:e.insp_type_long},e.insp_type)}))]})]}),Object(h.jsx)("div",{}),l?null:Object(h.jsx)("div",{children:""!==a.mc&&"Select"!==a.iteration&&""!==a.iteration&&"Select"!==a.type?Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:function(){!function(e){var i=n.find((function(t){return t.mc_no===e.mc}));r(),i?t(e):b("This MC doesn't exists or it doesn't belong to this manufacturer!")}(a)},children:"Create Inspection"})}):null})]}),Object(h.jsx)(v,{area:"searchKey"})]})},g=function(e){var t=e.handleSave,n=e.handleDelete,c=e.handleSearch,a=e.inspectionID,s=e.printReport,r=e.editMode,o=e.setEditMode,l=e.userProfile,d=e.misc,u=e.showFull,j=e.clearScreen,m=e.setDisplayAlert,b=e.oldMC,p=d.submitted,f=void 0!==l.ignore_submit&&l.ignore_submit,O=function(e){var i=e.target.id;if(o(!1),"save"===i&&t(!!p,!1),"saveAndEdit"===i&&t(!!p,!0),"edit"===i){if(b.current)return void m({message:"You can NOT edit inspecton with obsolete MC.  This is for view only !",position:0,timeout:2500,color:"alert__red"});o(!0)}"delete"===i&&n(a),"search"===i&&(o(!1),c(a)),"print"===i&&s("Inspection_Report.xlsx",!1),"print_draft"===i&&s("Inspection_Report.xlsx",!0),"cancel"===i&&(o(!1),j())};return Object(h.jsx)(i.Fragment,{children:Object(h.jsxs)("div",{className:"mainMenu",children:[Object(h.jsxs)("div",{className:"mainMenu_inspectionKey",children:["Booking Key : \xa0\xa0",null,null]}),r?Object(h.jsx)("button",{id:"saveAndEdit",onClick:O,children:"Save & Edit"}):null,r?Object(h.jsx)("button",{id:"save",onClick:O,children:"Save"}):null,r?null:Object(h.jsx)("button",{id:"search",onClick:O,children:"Search"}),r||!u||p&&!f?null:Object(h.jsxs)("button",{id:"edit",onClick:O,children:["Edit\xa0",p&&u?Object(h.jsx)("i",{className:"fa fa-lock"}):null]}),!u||p&&!f?null:Object(h.jsx)("button",{id:"cancel",onClick:O,children:"Cancel"}),!r&&p?Object(h.jsx)("button",{id:"print",onClick:O,children:"Print IC"}):null,r||p||!u?null:Object(h.jsx)("button",{id:"print_draft",onClick:O,children:"Print"}),u&&f&&u?Object(h.jsx)("button",{id:"delete",onClick:O,className:"deleteButton",children:"Delete"}):null]})})},y=function(e){for(var t=e.setInspectionID,n=e.handleSearch,c=e.searchedMC,a=e.setShowSearchedMC,s=e.currentMF,r=[],o=0;o<c.length;o++)c[o].main.mf_no===s&&r.push(c[o]._id);return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsxs)("div",{className:"searchedMC",children:[Object(h.jsxs)("div",{className:"searchedMC_header1 searchedMC_header",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:"MC"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),Object(h.jsxs)("div",{className:"searchedMC_header2 searchedMC_header",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:"MC"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),Object(h.jsxs)("div",{className:"searchedMC_header3 searchedMC_header",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:"MC"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),r.length>0?r.map((function(e,i){return Object(h.jsxs)("div",{className:"searchedMC_detail",onClick:function(){var i;i={mc:e.mc,iteration:e.iteration,type:e.type},t(i),n(i),document.getElementById("searchKey_mc").value=i.mc,document.getElementById("searchKey_iteration").value=i.iteration,document.getElementById("searchKey_type").value=i.type,a(!1)},children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:e.mc}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:e.iteration}),Object(h.jsx)("div",{className:"searchedMC_detail_center",children:e.type})]},i)})):null]}),Object(h.jsx)(v,{area:"mfrSelection"})]})},S=function(e){var t=e.currentSU,n=e.currentMF,c=e.currentSUName,a=e.currentMFName,s=e.setSelectingSupplier,r=e.setShowFull,o=e.setMFRsearch;return Object(h.jsx)(i.Fragment,{children:t?Object(h.jsxs)("div",{className:"supplierInfo",children:[Object(h.jsx)("button",{onClick:function(){r(!1),o(""),s(!0)},children:"Select"}),Object(h.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoSU",id:"supplierInfo_bar",children:[c.toLowerCase()," (",t,")"]}),Object(h.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoMF",children:[a.toLowerCase()," (",n,")"]})]}):null})},M=function(e){var t=e.partyTable,n=e.setCurrentSU,c=e.setCurrentMF,a=e.setCurrentSUName,s=e.setCurrentMFName,r=e.selectingSupplier,o=e.setSelectingSupplier,l=e.setMFRsearch,d=e.mfrSearch,u=e.getMCtable,j=e.setEditMode;return Object(h.jsxs)(i.Fragment,{children:[t&&r?Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"mfrSelection_header",children:" Select a manufacturer below:"}),Object(h.jsx)("div",{className:"mfrSelection_input",children:Object(h.jsx)("input",{type:"text",id:"mfrSearch",name:"mfrSearch",value:d||"",justify:"left",onChange:function(e){var t=e.target.value;l(t.toUpperCase())},style:{textTransform:"uppercase"},placeholder:"Type to search"})})]}):null,t&&r?t.filter((function(e){return 0===d.length||"".concat(" ",e.SU_NAME," ",e.SU," ",e.MF," ",e.MF_NAME).search(d)>0})).map((function(e){return Object(h.jsxs)("div",{className:"mfrSelection",onClick:function(){var t,i,r,l;t=e.SU,i=e.MF,r=e.SU_NAME,l=e.MF_NAME,n(t),c(i),a(r),s(l),o(!1),u(t,i),j(!1)},children:[Object(h.jsxs)("div",{className:"mfrSelectionSU",children:[e.SU_NAME," (",e.SU,")"," "]}),Object(h.jsxs)("div",{className:"mfrSelectionMF",children:[e.MF_NAME," (",e.MF,")"," "]})]},e.SU.concat(e.MF))})):null]})},C=n(56),N=n.n(C),T=function(e){var t=e.setInspectionDate,n=e.inspectionDate,c=e.setMisc,a=e.misc,r=e.editMode,o=e.mqaMembers,l=e.userProfile,d=e.productCategories,u=Object(i.useState)(""),j=Object(s.a)(u,2),b=j[0],p=j[1];Object(i.useEffect)((function(){if(""===n){var e=new Date,i=6e4*e.getTimezoneOffset();e=new Date(e.getTime()-i),t(e.toISOString().substring(0,10))}}),[n,t]),Object(i.useEffect)((function(){var e=Object(m.a)({},a);void 0===e.qa_type&&void 0!==l&&void 0!==l.email&&(l.email.includes("@macys.com")?(e=Object(m.a)(Object(m.a)({},e),{},{qa_type:"MQA"}),c(e)):(e=Object(m.a)(Object(m.a)({},e),{},{qa_type:"SQA",sqa:l.email,governance_inspection:void 0,sqa_iteration:void 0,cap:void 0}),p(!0),c(e))),"SQA"===a.qa_type&&p(!0)}),[a,l,c]);var f=function(e,t){return function(n){var i=n.target.value;if(a){var s=Object(m.a)({},a);switch(e){case 2:s=Object(m.a)(Object(m.a)({},s),{},{product_type:i});break;case 7:s=Object(m.a)(Object(m.a)({},s),{},{governance_inspection:t});break;case 11:s=Object(m.a)(Object(m.a)({},s),{},{ship_window:i});break;case 15:s=Object(m.a)(Object(m.a)({},s),{},{qa_type:i}),"SQA"===i&&(s=Object(m.a)(Object(m.a)({},s),{},{sqa:l.email,governance_inspection:void 0,sqa_iteration:void 0,cap:void 0}),p(!0)),"MQA"===i&&void 0===s.mqa&&(s=Object(m.a)(Object(m.a)({},s),{},{mqa:l.email})),"MQA"===i&&p(!1);break;case 16:s=Object(m.a)(Object(m.a)({},s),{},{mqa:i});break;case 17:s=Object(m.a)(Object(m.a)({},s),{},{sqa:i});break;case 19:s=Object(m.a)(Object(m.a)({},s),{},{product_category:i});break;case 20:s=Object(m.a)(Object(m.a)({},s),{},{label:i});break;default:console.log("No element")}c(s)}}};return Object(h.jsxs)("div",{className:"misc",children:[Object(h.jsxs)("div",{className:"misc_a misc_grid_a ",children:[Object(h.jsx)("div",{className:"misc_title",children:"Governance Inspection (A)"}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"radio",id:"misc_governance_inspection_yes",name:"misc_governance_inspection",value:a.governance_inspection||"",checked:"Yes"===a.governance_inspection,onChange:f(7,"Yes"),disabled:r&&!b?"":"disabled"})}),Object(h.jsx)("div",{children:"Yes"}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"radio",id:"misc_governance_inspection_no",name:"misc_governance_inspection",value:a.governance_inspection||"",checked:"No"===a.governance_inspection,onChange:f(7,"No"),disabled:r&&!b?"":"disabled"})}),Object(h.jsx)("div",{children:"No"})]}),Object(h.jsx)("div",{className:"misc_b",children:Object(h.jsxs)("div",{className:"misc_title misc_grid_b",children:[Object(h.jsx)("div",{children:"Inspection Date (B)"}),Object(h.jsx)(N.a,{className:"datePicker",dateFormat:"MM/dd/yy",selected:function(e){var t=e;if(""===t){var n=6e4*(t=new Date).getTimezoneOffset();t=new Date(t.getTime()-n)}else{var i=6e4*(t=new Date(e)).getTimezoneOffset();t=new Date(t.getTime()+i)}return t}(n),onChange:function(e){return function(e){var n=6e4*e.getTimezoneOffset(),i=new Date(e.getTime()-n);t(i.toISOString().substring(0,10))}(e)},readOnly:r?"":"readOnly"})]})}),Object(h.jsxs)("div",{className:"misc_c misc_grid_c",children:[Object(h.jsx)("div",{className:"misc_title",children:"Ship Window (C)"}),Object(h.jsx)("input",{type:"text",id:"misc_shipWindow",name:"misc_shipWindow",value:a.ship_window||"",justify:"left",placeholder:"Ship Window",onChange:f(11),readOnly:r?"":"readOnly"})]}),Object(h.jsxs)("div",{className:"misc_d misc_grid_d",children:[Object(h.jsx)("div",{className:"misc_title",children:"QA Type (D)"}),Object(h.jsxs)("select",{id:"misc_qaType",name:"misc_qaType",value:a.qa_type||"Select",justify:"left",placeholder:"QA Type",onChange:f(15),children:[Object(h.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(h.jsx)("option",{value:"MQA",disabled:"disabled",children:"MQA"}),Object(h.jsx)("option",{value:"SQA",disabled:"disabled",children:"SQA"})]})]}),Object(h.jsxs)("div",{className:"misc_e misc_grid_e",children:[Object(h.jsx)("div",{className:"misc_title",children:"Product Type (E)"}),Object(h.jsx)("input",{type:"text",id:"misc_productType",name:"misc_productType",value:a.product_type||"",justify:"left",placeholder:"Product Type",onChange:f(2),readOnly:r?"":"readOnly",style:{textTransform:"uppercase"}})]}),Object(h.jsxs)("div",{className:"misc_f misc_grid_f",children:[Object(h.jsx)("div",{className:"misc_title",children:"MQA"===a.qa_type||void 0===a.qa_type?Object(h.jsx)("span",{children:"MQA (F)"}):Object(h.jsx)("span",{children:"SQA (F)"})}),"MQA"===a.qa_type||void 0===a.qa_type?Object(h.jsxs)("select",{id:"misc_mqa",name:"misc_mqa",value:a.mqa||"Select",justify:"left",placeholder:" ",onChange:f(16),children:[Object(h.jsx)("option",{value:"Select",children:"Select"}),o&&o.map((function(e){return Object(h.jsx)("option",{value:e.mqa,disabled:r?"":"disabled",children:e.mqa},e.mqa)}))]}):Object(h.jsx)("input",{type:"text",id:"misc_sqa",name:"misc_sqa",value:a.sqa||"",justify:"left",placeholder:"Inspector",onChange:f(17),readOnly:"readOnly"})]}),Object(h.jsxs)("div",{className:"misc_g misc_grid_g",children:[Object(h.jsx)("div",{className:"misc_title",children:"Brand (G)"}),Object(h.jsx)("input",{type:"text",id:"misc_label",name:"misc_label",value:a.label||"",justify:"left",onChange:f(20),readOnly:r?"":"readOnly",style:{textTransform:"uppercase"}})]}),Object(h.jsxs)("div",{className:"misc_h misc_grid_h",children:[Object(h.jsx)("div",{className:"misc_title",children:"Product Category (H)"}),Object(h.jsxs)("select",{id:"misc_product_category",name:"misc_product_category",value:a.product_category||"Select",justify:"left",placeholder:" ",onChange:f(19),children:[Object(h.jsx)("option",{value:"Select",children:"Select"}),d&&d.map((function(e){return Object(h.jsx)("option",{value:e.category,disabled:r?"":"disabled",children:e.category},e.category)}))]})]})]})},k=function(e){var t=e.position;return Object(h.jsxs)(i.Fragment,{children:[1===t?Object(h.jsx)(v,{area:"getUserProfile",spinnerMessage:"Loading your profile, please wait... "}):null,2===t?Object(h.jsxs)("div",{children:[Object(h.jsx)(v,{area:"printReport",spinnerMessage:"Preparing the report, please wait... "}),Object(h.jsx)(v,{area:"saveInspection",spinnerMessage:"Saving the changes, please wait... "}),Object(h.jsx)(v,{area:"deleteInspection",spinnerMessage:"Deleting, please wait... "}),Object(h.jsx)(v,{area:"createInspection",spinnerMessage:"Loading, please wait... "}),Object(h.jsx)(v,{area:"getMCtable",spinnerMessage:"Getting MC data, please wait... "})]}):null,3===t?Object(h.jsxs)("div",{children:[Object(h.jsx)(v,{area:"sharePointFiles",spinnerMessage:"Refreshing SharePoint info, please wait... "}),Object(h.jsx)(v,{area:"downloadSharePointfiles",spinnerMessage:"Downloading SharePoint info, please wait... "}),Object(h.jsx)(v,{area:"sharePointUpload",spinnerMessage:"Uploading file(s) to SharePoint, please wait... "})]}):null,10===t?Object(h.jsx)(v,{area:"pastInspection",spinnerMessage:"Loading past inspections, please wait... "}):null]})},w=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(!1),r=Object(s.a)(a,2),o=r[0],l=r[1],_=Object(i.useState)([]),v=Object(s.a)(_,2),C=(v[0],v[1]),N=Object(i.useState)({position:100}),w=Object(s.a)(N,2),I=w[0],q=w[1],P=Object(i.useState)([]),E=Object(s.a)(P,2),D=E[0],B=E[1],F=Object(i.useState)([]),A=Object(s.a)(F,2),U=(A[0],A[1]),Q=Object(i.useState)(""),L=Object(s.a)(Q,2),R=L[0],K=L[1],z=Object(i.useState)({mc:"",iteration:"Select",type:"Select"}),H=Object(s.a)(z,2),J=H[0],G=H[1],W=Object(i.useState)([]),Y=Object(s.a)(W,2),V=Y[0],X=Y[1],Z=Object(i.useState)(""),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ne=Object(i.useState)(""),ie=Object(s.a)(ne,2),ce=ie[0],ae=ie[1],se=Object(i.useState)([]),re=Object(s.a)(se,2),oe=re[0],le=re[1],de=Object(i.useState)([]),ue=Object(s.a)(de,2),je=ue[0],me=ue[1],be=Object(i.useState)(""),he=Object(s.a)(be,2),pe=he[0],fe=he[1],Oe=Object(i.useState)(""),_e=Object(s.a)(Oe,2),ve=_e[0],xe=_e[1],ge=Object(i.useState)(!0),ye=Object(s.a)(ge,2),Se=ye[0],Me=ye[1],Ce=Object(i.useState)([]),Ne=Object(s.a)(Ce,2),Te=Ne[0],ke=Ne[1],we=Object(i.useState)([]),Ie=Object(s.a)(we,2),qe=Ie[0],Pe=Ie[1],Ee=Object(i.useState)(!1),De=Object(s.a)(Ee,2),Be=De[0],Fe=De[1],Ae=Object(i.useState)({}),Ue=Object(s.a)(Ae,2),Qe=Ue[0],Le=Ue[1],Re=Object(i.useState)({}),Ke=Object(s.a)(Re,2),ze=Ke[0],He=Ke[1],Je=Object(i.useState)(!1),Ge=Object(s.a)(Je,2),We=Ge[0],Ye=Ge[1],Ve=Object(i.useState)([]),Xe=Object(s.a)(Ve,2),Ze=Xe[0],$e=Xe[1],et=Object(i.useState)([]),tt=Object(s.a)(et,2),nt=tt[0],it=tt[1],ct=Object(i.useState)(""),at=Object(s.a)(ct,2),st=at[0],rt=at[1],ot=Object(i.useState)(""),lt=Object(s.a)(ot,2),dt=lt[0],ut=lt[1],jt=Object(i.useState)(""),mt=Object(s.a)(jt,2),bt=mt[0],ht=mt[1],pt=Object(i.useState)([]),ft=Object(s.a)(pt,2),Ot=ft[0],_t=ft[1],vt=Object(i.useState)([]),xt=Object(s.a)(vt,2),gt=xt[0],yt=xt[1],St=Object(i.useState)(0),Mt=Object(s.a)(St,2),Ct=Mt[0],Nt=Mt[1],Tt=Object(i.useState)(0),kt=Object(s.a)(Tt,2),wt=kt[0],It=kt[1],qt=Object(i.useState)(0),Pt=Object(s.a)(qt,2),Et=Pt[0],Dt=Pt[1],Bt=Object(i.useState)([]),Ft=Object(s.a)(Bt,2),At=Ft[0],Ut=Ft[1],Qt=Object(i.useRef)(!1),Lt=Object(i.useRef)(""),Rt=Object(i.useRef)(!1),Kt=Object(i.useState)([]),zt=Object(s.a)(Kt,2),Ht=zt[0],Jt=zt[1];Object(i.useEffect)((function(){var e=document.querySelector(":root"),t=navigator.userAgent.toLowerCase();/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(t)?e.style.setProperty("--changeTrack_scroll_width","7fr"):e.style.setProperty("--changeTrack_scroll_width","6.7fr"),t.includes("safari")&&t.includes("macintosh")&&e.style.setProperty("--changeTrack_scroll_width","7fr"),Object(O.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){X(e.userProfile),B(e.mcTable),me(e.partyTable),ke(e.mfList),Pe(e.aqlTable),it(e.checkListTemplate),ut(e.mqaMembers),ht(e.productCategories),_t(e.inspType)})).catch((function(e){console.log(e),Vt({message:"Error getting user's profile at this moment, please try again !",position:0,timeout:3e3,color:"alert__red"})})),"getUserProfile")}),[]);var Gt=function(e){e=e.trim();var t,n,i,c=document.getElementsByClassName("itemTotal_Detail"),a=c.length,s=-1;for(n=0;n<a;n++)c[n].style.backgroundColor="#0746f54d";for(t=0;t<a;t++){c[t].getElementsByTagName("div")[2].innerHTML.includes(e)&&""!==e&&(c[t].style.backgroundColor="yellow",-1===s&&(s=t))}for(s>0&&(document.getElementById("scroller").scrollTo(0,0),i=document.getElementById("scroller").scrollHeight/a*s,document.getElementById("scroller").scrollBy(0,i)),a=(c=document.getElementsByClassName("itemTable_Detail")).length,s=-1,n=0;n<a;n++)c[n].style.backgroundColor="#0746f54d";for(t=0;t<a;t++){c[t].children[2].innerHTML.includes(e)&&""!==e&&(c[t].style.backgroundColor="yellow",-1===s&&(s=t))}s>0&&(document.getElementById("itemTableScroller").scrollTo(0,0),i=document.getElementById("itemTableScroller").scrollHeight/a*s,document.getElementById("itemTableScroller").scrollBy(0,i))};Object(i.useEffect)((function(){var e=Object(b.a)(gt),t=e.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),n=e.reduce((function(e,t){return e+parseInt(t.inspect_qty)}),0);if(Nt(t),It(n),t>0){var i=qe.filter((function(e){return e.size_start<=t&&e.size_end>=t}))[0]["25sample"];Dt(i)}else Dt(0)}),[gt,qe]);var Wt=function(e,t){je.map((function(t){return t.SU===e?fe(t.SU_NAME):null})),je.map((function(e){return e.MF===t?xe(e.MF_NAME):null}))},Yt=function(e){var t,i=D.filter((function(t){return t.mc_no===e}));!function(e){Rt.current=!1;var t=Object(b.a)(n).concat(e);c(t);var i=gt.concat(e.map((function(e){return{mc_no:e.mc_no,po_no:e.po_no,order_qty:e.order_qty,item_no:e.item_no,ship_qty:e.ship_qty}}))),a=i.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),s=qe.filter((function(e){return e.size_start<=a&&e.size_end>=a})),r=i.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/a*s[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/a*s[0]["25sample"])})}));yt(r);var o=[];r.map((function(e){return e.po_no})).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(e){var n=t.filter((function(t){return t.po_no===e}))[0].mc_no,i=t.filter((function(t){return t.po_no===e})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),c=r.filter((function(t){return t.po_no===e})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),a=t.filter((function(t){return t.po_no===e}))[0].customer;o.push({mc_no:n,po_no:e,order_qty:i,ship_qty:c,customer:a})})),Ut(o)}(i),t=void 0===Qe.ship_window||0===Qe.ship_window.length?i[0].ship_window:Qe.ship_window.concat(", ").concat(i[0].ship_window);for(var a=i[0].item_desc,s=(Qe.fibre_content,0);s<i.length;s++)if(i[s].fabric_note.length>0){i[s].fabric_note;break}var r=i[0].label;Le(Object(m.a)(Object(m.a)({},Qe),{},{ship_window:t,product_type:a,label:r})),Wt(ee,ce),Ye(!0),Fe(!0),cn(),K("")},Vt=function(e){q(e),setTimeout((function(){q({position:100})}),e.timeout)},Xt=function(e){Object(O.trackPromise)(d()({url:"/booking/api/search",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({_id:e})}).then((function(e){return e.data})).then((function(t){Rt.current=!1;var n=t.main.mf_no;if(0===t.items.length&&n===ce)console.log("Empty inspection record with mf# :",n);else{if(n!==ce)return void Vt({message:"This MC does not belong to this manufacturer!",position:0,timeout:1500,color:"alert__red"});0===D.filter((function(t){return t.mc_no===e.mc})).length&&(Rt.current=!0)}Ye(!0),Qt.current=!0,c(t.items),yt(t.itemsTotal),Ut(t.poList),K(t.main.inspection_date),He(t.main),Le(t.misc?t.misc:{}),Wt(t.main.su_no,t.main.mf_no),void 0===t.update_history?$e([]):$e(t.update_history);var i=new Array(t.itemsTotal.length).fill(!1);Jt(i)})).catch((function(e){406===e.response.status?Vt({message:"Not a valid MC for this manufacturer !",position:0,timeout:2e3,color:"alert__red"}):501===e.response.status?window.location="/login/timeout":Vt({message:"No such Inspection ID, please try again !",position:0,timeout:2e3,color:"alert__red"})})),"searchKey")},Zt=function(){c([]),yt([]),Ut([]),C([]),U([]),le([]),l(!1),Le([]),He([]),Ye(!1),Fe(!1),Lt.current="",document.getElementById("itemTable_MC").value="",document.getElementById("itemTotal_searchString")&&(document.getElementById("itemTotal_searchString").value=""),Jt([])},$t=function(e){return new Promise((function(t){return setTimeout(t,e)}))},en=function(){var e=Object(j.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vt({message:"Session timeout, please login again !",position:0,timeout:3e3,color:"alert__red"}),e.next=3,$t(3e3);case 3:window.location="/login/timeout";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tn=function(e){l(!0),Object(O.trackPromise)(d()({url:"/booking/api/searchInspByMC",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({mc:e,mfList:Te})}).then((function(e){return e.data})).then((function(e){le(e)})).catch((function(e){501===e.response.status?en():Vt({message:"Something went wrong !",position:0,timeout:2e3,color:"alert__red"})})),"mfrSelection")};function nn(e){var t=new Date(e).toTimeString(),n=new Date(e).toDateString()+" "+t,i=n.search("GMT+")-1;return n=n.substring(0,i)}var cn=function(){var e=Object(b.a)(nt);e.sort((function(e,t){return e.id-t.id})),U(e)};return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)(S,{currentSU:ee,currentMF:ce,currentSUName:pe,currentMFName:ve,setSelectingSupplier:Me,setShowFull:Ye,setMFRsearch:rt}),Object(h.jsx)(M,{partyTable:je,setCurrentSU:te,setCurrentMF:ae,setCurrentSUName:fe,setCurrentMFName:xe,selectingSupplier:Se,setSelectingSupplier:Me,setMFRsearch:rt,mfrSearch:st,getMCtable:function(e,t){Object(O.trackPromise)(d()({url:"/booking/api/getMCtable",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({su:e,mf:t})}).then((function(e){return e.data})).then((function(e){B(e)})).catch((function(e){Vt({message:"Error getting MC",position:4,timeout:1500,color:"alert__red"})})),"getMCtable")},setEditMode:Fe}),Object(h.jsx)(k,{position:1}),Object(h.jsx)(g,{handleSave:function(e,t){if(void 0===Qe.qa_type||void 0===Qe.sqa&&void 0===Qe.mqa)return Vt({message:"QA Type and QA must be identified !",position:0,timeout:3e3,color:"alert__red"}),void Fe(!0);var i={su_no:ee,mf_no:ce,inspection_date:R,submitted:e},c={mc:J.mc,iteration:J.iteration,type:J.type},a=Object(m.a)({},Qe);a=Object(m.a)({},a),Object(O.trackPromise)(d()({url:"/booking/api/save",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:c,main:i,misc:a,mf:ce,items:n,itemsTotal:gt,poList:At,updateHistory:Ze,folder:"SU"+ee+"MF"+ce,inspection_id:J.mc+"-"+J.iteration+"-"+J.type})}).then((function(e){Vt({message:"Saved Successfully !",position:0,timeout:1e3,color:"alert__green"}),t?Fe(!0):Zt()})).catch((function(e){var t="There was an error saving this record, please contact the admin !!";e.message.includes("500")?t=e.response.data:Vt({message:t,position:0,timeout:4e3,color:"alert__red"}),Vt({message:t,position:0,timeout:4e3,color:"alert__red"})})),"saveInspection")},handleSearch:Xt,inspectionID:J,handleDelete:function(e){!0===window.confirm("Are you sure you want to delete this inspection ? ")&&Object(O.trackPromise)(d()({url:"/booking/api/delete",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(e){return 200===e.status?(Zt(),Vt({message:"Deleted successfully !",position:0,timeout:1500,color:"alert__green"})):null})).catch((function(e){Vt({message:"Error deleting the inspection ID !",position:0,timeout:1500,color:"alert__red"})})),"deleteInspection")},printReport:function(e,t){void 0!==Qe.qa_type?"MQA"!==Qe.qa_type||void 0!==Qe.mqa&&"Select"!==Qe.mqa?(e="MMG Inspection Report - "+J.mc+"-"+J.iteration+"-"+J.type+".xlsx",Object(O.trackPromise)(fetch("/printreport",{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",inspectionID:JSON.stringify({inspectionID:J}),localTime:JSON.stringify(nn(Date.now()))}}).then((function(e){return e.blob()})).then((function(t){var n=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=n,i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)})),"printReport")):Vt({message:"MQA must be specified !",position:0,timeout:2e3,color:"alert__red"}):Vt({message:"QA Type must be chosen !",position:0,timeout:2e3,color:"alert__red"})},editMode:Be,setEditMode:Fe,userProfile:V,main:ze,misc:Qe,showFull:We,clearScreen:Zt,setDisplayAlert:Vt,oldMC:Rt}),Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)(x,{checkDuplicateID:function(e){Object(O.trackPromise)(d()({url:"/booking/api/checkDuplicateID",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(t){return 200===t.status?void Vt({message:"This key has been used by previous inspection ! Please check and or consider a new iteration!",position:0,timeout:3e3,color:"alert__red"}):Yt(e.mc)})),"createInspection")},mcTable:D,setDisplayAlert:Vt,inspectionID:J,setInspectionID:G,clearScreen:Zt,searchInspByMC:tn,currentSU:ee,currentMF:ce,editMode:Be,inspType:Ot,showFull:We}),o?Object(h.jsx)(y,{inspectionID:J,setInspectionID:G,handleSearch:Xt,searchInspByMC:tn,searchedMC:oe,setShowSearchedMC:l,currentMF:ce}):null]})})}),0===I.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:I})})}):null,Object(h.jsx)(k,{position:2}),Object(h.jsx)("div",{className:"flex-row "+(We?null:"hideSection"),children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(i.Fragment,{children:Object(h.jsx)(T,{setInspectionDate:K,inspectionDate:R,setMisc:Le,misc:Qe,editMode:Be,mqaMembers:dt,productCategories:bt,userProfile:V,items:n})})})}),1===I.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:I})})}):null,Object(h.jsx)("div",{className:"flex-row "+(We?null:"hideSection"),children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(p,{setItems:c,items:n,mcTable:D,addMC:Yt,currentSU:ee,currentMF:ce,editMode:Be,aqlTable:qe,setDisplayAlert:Vt,ship:gt,setShip:yt,poList:At,setPOList:Ut,totalShip:Ct,setTotalShip:Nt,totalInspect:wt,setTotalInspect:It,totalSample:Et,setTotalSample:Dt,reset:function(){yt((function(e){return e.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{inspect_qty:e.sample_qty})}))}))},handleDeletePO:function(e,t){Gt("");var i=Object(b.a)(gt);i=i.filter((function(e){return e.po_no!==t}));var a=(i=gt.filter((function(e){return!(e.po_no===t)}))).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),s=qe.filter((function(e){return e.size_start<=a&&e.size_end>=a}));i=i.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/a*s[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/a*s[0]["25sample"])})})),yt(i),Ut((function(e){return e.filter((function(e){return e.po_no!==t}))}));var r=n.map((function(e){return e.mc_no})).filter((function(e,t,n){return n.indexOf(e)===t})),o=i.map((function(e){return e.mc_no})).filter((function(e,t,n){return n.indexOf(e)===t}));r.length>o.length&&c((function(t){return t.filter((function(t){return t.mc_no!==e}))}))},handleHighlight:Gt,checkedState:Ht,setCheckedState:Jt,deleteShipMulti:function(e){Gt("");var t=e.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),i=qe.filter((function(e){return e.size_start<=t&&e.size_end>=t}));e=e.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{sample_qty:Math.round(e.ship_qty/t*i[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/t*i[0]["25sample"])})})),yt(e);var a=Object(b.a)(n),s=[];e.map((function(e){return e.po_no})).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(t){var n=a.filter((function(e){return e.po_no===t}))[0].mc_no,i=a.filter((function(e){return e.po_no===t})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),c=e.filter((function(e){return e.po_no===t})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),r=a.filter((function(e){return e.po_no===t}))[0].customer;s.push({mc_no:n,po_no:t,order_qty:i,ship_qty:c,customer:r})})),Ut(s);var r=e.map((function(e){return e.mc_no})).filter((function(e,t,n){return n.indexOf(e)===t}));c(a.filter((function(e){return r.includes(e.mc_no)})))}})})}),5===I.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:I})})}):null,2===I.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:I})})}):null,3===I.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:I})})}):null,Object(h.jsx)("div",{className:"flex-row "+(We?null:"hideSection"),children:Object(h.jsx)("div",{className:"flex-large ",children:Object(h.jsx)(k,{position:3})})}),4===I.position?Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsx)("div",{className:"flex-large",children:Object(h.jsx)(f,{alert:I})})}):null]})},I=function(e){return Object(h.jsx)("div",{className:"welcome",children:Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:"/static/img/booking.jpeg","aria-hidden":!0,alt:"MMG Overseas Booking",style:{width:"100%",height:"103%",border:0}})})})},q=function(e){var t=e.userProfile,n=Object(i.useState)(""),c=Object(s.a)(n,2),a=c[0],r=c[1];return Object(i.useEffect)((function(){r("/api/getPhoto/"+t.email)}),[t.email]),Object(h.jsx)(i.Fragment,{children:Object(h.jsxs)("div",{className:"userProfile ".concat("dev"===t.databaseSchema?"userProfile_dev_color":"userProfile_prod_color"),children:[Object(h.jsx)("div",{className:"userProfile_d userProfile_grid_d",children:Object(h.jsx)("img",{src:"static/img/macys-header.jpg","aria-hidden":!0,alt:"",width:"60",height:"60"})}),Object(h.jsx)("div",{className:"userProfile_e userProfile_grid_e",children:"Inspection Booking"}),Object(h.jsxs)("div",{className:"userProfile_b userProfile_grid_b",children:[t.userName," "]}),Object(h.jsxs)("div",{className:"userProfile_a userProfile_grid_a",children:[Object(h.jsx)("img",{src:a,"aria-hidden":!0,alt:"Searching for photo...",width:"60",height:"60"})," "]})]})})},P=function(){var e=Object(i.useState)({}),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(i.useEffect)((function(){Object(O.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){c(e.userProfile)})).catch((function(e){console.log(e)})))}),[]),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"flex-row",children:Object(h.jsxs)("div",{className:"flex-large",children:[Object(h.jsx)(q,{userProfile:n}),Object(h.jsxs)(r.a,{children:[Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{className:"app_header",children:[Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/",className:"link",children:"Home"})}),Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/appBooking",className:"link",children:"Booking"})}),Object(h.jsx)("button",{onClick:function(){alert("Sorry not ready yet")},children:"Print Bookings"}),Object(h.jsx)("button",{className:"fa fa-sign-out",onClick:function(){localStorage.clear(),window.location="/logout"},children:"Logout"})]})}),Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{path:"/",element:Object(h.jsx)(I,{env:n.environment})}),Object(h.jsx)(o.a,{path:"/appBooking",element:Object(h.jsx)(w,{})})]})]})]})})})};a.a.render(Object(h.jsx)(P,{}),document.getElementById("root"))},44:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){}},[[150,1,2]]]);
//# sourceMappingURL=main.01d48d13.chunk.js.map